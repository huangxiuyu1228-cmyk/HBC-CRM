<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>HTML Editor - LDDGO.NET</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/styles/default.min.css" type="text/css">
</head>
<body>

<p>&lt;!DOCTYPE html&gt;<br />&lt;html lang="zh-CN" class="transition-colors duration-300"&gt;<br />&lt;head&gt;<br />&nbsp; &nbsp; &lt;meta charset="UTF-8"&gt;<br />&nbsp; &nbsp; &lt;meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"&gt;<br />&nbsp; &nbsp; &lt;title&gt;湖银客户管理系统 | HBC CRM V10.0 Enhanced&lt;/title&gt;<br />&nbsp; &nbsp; &lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;<br />&nbsp; &nbsp; &lt;link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"&gt;<br />&nbsp; &nbsp; &lt;script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"&gt;&lt;/script&gt;<br />&nbsp; &nbsp; &lt;link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&amp;family=Noto+Sans+SC:wght@300;400;500;700&amp;display=swap" rel="stylesheet"&gt;</p>
<p>&nbsp; &nbsp; &lt;script&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; tailwind.config = {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; darkMode: 'class',<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; theme: {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; extend: {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colors: {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; primary: 'rgb(var(--color-primary) / &lt;alpha-value&gt;)',<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; primaryDark: 'rgb(var(--color-primary-dark) / &lt;alpha-value&gt;)',<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; surface: 'rgb(var(--color-surface) / &lt;alpha-value&gt;)',<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fontFamily: {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sans: ['"Noto Sans SC"', '"Inter"', 'sans-serif'],<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mono: ['"Inter"', 'monospace'],<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // ✨ 优化动画曲线和时长<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; animation: {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'slide-up': 'slideUp 0.4s cubic-bezier(0.25, 1, 0.5, 1) forwards',<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'slide-left': 'slideLeft 0.4s cubic-bezier(0.25, 1, 0.5, 1) forwards',<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'blob': 'blob 20s infinite alternate',<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'fade-in': 'fadeIn 0.2s ease-out forwards',<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'marquee': 'marquee 15s linear infinite', // 跑马灯动画<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'fade-in-slide-up': 'fadeInSlideUp 0.5s cubic-bezier(0.25, 1, 0.5, 1) forwards', // 页面切换动画<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // ✨ 优化动画曲线<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; keyframes: {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; slideUp: { '0%': { opacity: '0', transform: 'translateY(20px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; slideLeft: { '0%': { opacity: '0', transform: 'translateX(20px)' }, '100%': { opacity: '1', transform: 'translateX(0)' } },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; blob: {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '0%': { transform: 'translate(0px, 0px) scale(1)' },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '33%': { transform: 'translate(30px, -50px) scale(1.1)' },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '100%': { transform: 'translate(0px, 0px) scale(1)' },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 新增页面切换动画<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fadeInSlideUp: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 新增跑马灯动画<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; marquee: { '0%': { transform: 'translateX(100%)' }, '100%': { transform: 'translateX(-100%)' } },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &lt;/script&gt;<br />&nbsp; &nbsp; &lt;style&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; :root {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* 默认 (Emerald 600: #059669) */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --color-primary: 5 150 105;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --color-primary-dark: 4 120 87;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --color-surface: 249 250 251;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --glass-bg: rgba(255, 255, 255, 0.65);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --glass-border: rgba(255, 255, 255, 0.8);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --text-main: #1F2937;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --text-sub: #6B7280;<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; [data-theme="pink"] {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --color-primary: 236 72 153;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --color-primary-dark: 219 39 119;<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; [data-theme="blue"] {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --color-primary: 37 99 235;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --color-primary-dark: 29 78 216;<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; .dark {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --color-surface: 17 24 39;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --glass-bg: rgba(31, 41, 55, 0.7);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --glass-border: rgba(55, 65, 81, 0.5);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --text-main: #F3F4F6;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --text-sub: #9CA3AF;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background-color: #111827 !important;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color: #F3F4F6;<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; body {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; font-family: 'Noto Sans SC', sans-serif;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background-color: #F3F4F6;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color: var(--text-main);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; overflow-x: hidden;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -webkit-tap-highlight-color: transparent;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; transition: background-color 0.3s, color 0.3s;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; .glass-panel {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; background: var(--glass-bg);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; backdrop-filter: blur(24px) saturate(180%);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -webkit-backdrop-filter: blur(24px) saturate(180%);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; border: 1px solid var(--glass-border);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.02);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; /* ✨ 优化 hover 动画 */<br />&nbsp; &nbsp; &nbsp; &nbsp; .glass-panel:hover {&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; transform: translateY(-3px) scale(1.01);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; box-shadow: 0 8px 20px rgba(0,0,0,0.08);<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; .dark .glass-panel {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; box-shadow: 0 4px 20px rgba(0,0,0,0.2);<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; /* ✨ 新增 active 动画 */<br />&nbsp; &nbsp; &nbsp; &nbsp; button:active, .cursor-pointer:active {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; transform: scale(0.98);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; transition: transform 0.1s ease;<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; .login-bg { background: radial-gradient(circle at 50% 50%, #fff 0%, #f3f4f6 100%);<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; .dark .login-bg { background: radial-gradient(circle at 50% 50%, #1f2937 0%, #111827 100%);<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; .no-scrollbar::-webkit-scrollbar { display: none;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; .custom-scroll::-webkit-scrollbar { width: 4px;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; .custom-scroll::-webkit-scrollbar-track { background: transparent;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; .custom-scroll::-webkit-scrollbar-thumb { background-color: rgba(156, 163, 175, 0.3); border-radius: 20px;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; .auth-tab.active { color: var(--text-main);<br />&nbsp; &nbsp; &nbsp; &nbsp; border-bottom: 2px solid rgb(var(--color-primary)); }<br />&nbsp; &nbsp; &nbsp; &nbsp; .auth-tab { color: var(--text-sub); border-bottom: 2px solid transparent;<br />&nbsp; &nbsp; &nbsp; &nbsp; cursor: pointer; transition: all 0.3s; }<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; @media screen and (max-width: 768px) { input, select, textarea { font-size: 16px !important;<br />&nbsp; &nbsp; &nbsp; &nbsp; } }<br />&nbsp; &nbsp; &lt;/style&gt;<br />&lt;/head&gt;<br />&lt;body class="h-screen w-screen overflow-hidden relative selection:bg-primary selection:text-white"&gt;</p>
<p>&nbsp; &nbsp; &lt;div class="fixed inset-0 pointer-events-none z-0 overflow-hidden opacity-60 dark:opacity-20 transition-opacity"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="absolute top-[-20%] left-[-10%] w-[800px] h-[800px] bg-primary/20 rounded-full mix-blend-multiply filter blur-[80px] animate-blob"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="absolute top-[20%] right-[-20%] w-[600px] h-[600px] bg-blue-400/20 rounded-full mix-blend-multiply filter blur-[80px] animate-blob animation-delay-2000"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="absolute bottom-[-10%] left-[20%] w-[700px] h-[700px] bg-purple-400/20 rounded-full mix-blend-multiply filter blur-[80px] animate-blob animation-delay-4000"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &lt;/div&gt;</p>
<p>&nbsp; &nbsp; &lt;div id="login-page" class="absolute inset-0 z-50 flex items-center justify-center login-bg transition-opacity duration-700"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="relative z-10 w-full max-w-sm p-10 m-4 bg-white/60 dark:bg-gray-800/60 backdrop-blur-xl rounded-[2rem] animate-slide-up shadow-[0_20px_50px_rgba(0,0,0,0.05)] border border-white dark:border-gray-700 flex flex-col"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="text-center mb-8 space-y-2"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h1 class="text-xl font-bold text-gray-800 dark:text-white tracking-wide"&gt;湖北银行客户管理系统&lt;/h1&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p class="text-3xl font-black text-primary tracking-tighter uppercase font-mono" style="font-family: 'Inter', sans-serif;"&gt;HBC CRM ELITE V10.0&lt;/p&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="w-12 h-1 bg-gradient-to-r from-primary to-secondary mx-auto rounded-full mt-4"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex justify-center gap-8 mb-6 text-sm font-bold border-b border-gray-200/50 dark:border-gray-700/50"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div onclick="switchAuthMode('login')" id="tab-login" class="auth-tab active pb-3 px-4"&gt;登录&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div onclick="switchAuthMode('register')" id="tab-register" class="auth-tab pb-3 px-4"&gt;注册&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;form id="auth-form" class="space-y-5 flex-1"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-1"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="text-[10px] font-bold text-gray-400 ml-1 tracking-wider"&gt;USER ID&lt;/label&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="text" id="auth-id" class="w-full px-5 py-3 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all text-sm font-medium shadow-sm dark:text-white" placeholder="请输入工号" required&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="register-fields" class="hidden space-y-4"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="space-y-1 animate-slide-up"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="text-[10px] font-bold text-gray-400 ml-1 tracking-wider"&gt;FULL NAME&lt;/label&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="text" id="auth-name" class="w-full px-5 py-3 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all text-sm font-medium shadow-sm dark:text-white" placeholder="请输入您的姓名"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-1"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="text-[10px] font-bold text-gray-400 ml-1 tracking-wider"&gt;PASSWORD&lt;/label&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="password" id="auth-pwd" class="w-full px-5 py-3 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all text-sm font-medium shadow-sm dark:text-white" placeholder="请输入密码" required&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button type="submit" id="auth-btn" class="w-full py-4 bg-primary hover:bg-primaryDark text-white rounded-xl font-bold text-sm shadow-xl shadow-gray-200 dark:shadow-none transition-all hover:-translate-y-0.5 mt-2 tracking-wide"&gt;进入系统&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/form&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="mt-8 pt-4 border-t border-gray-200/50 dark:border-gray-700/50 text-center"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-primary/10 border border-primary/20 text-primary text-[10px] font-bold shadow-sm"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fa-solid fa-shield-halved"&gt;&lt;/i&gt; &lt;span&gt;V10.0 Enhanced | Local Storage&lt;/span&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &lt;/div&gt;</p>
<p>&nbsp; &nbsp; &lt;div id="app-container" class="hidden h-full flex flex-col md:flex-row relative z-10 p-2 md:p-4 gap-4"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;aside class="hidden md:flex flex-col w-64 glass-panel h-full rounded-[2rem] overflow-hidden relative shadow-sm z-20 bg-white/80 dark:bg-gray-800/80"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="p-8"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h1 class="font-black text-gray-800 dark:text-white text-xl leading-none"&gt;HBC CRM&lt;/h1&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p class="text-[10px] text-primary font-bold tracking-[0.2em] mt-1"&gt;ELITE V10.0&lt;/p&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;nav class="flex-1 px-4 space-y-1.5 mt-2"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="router.navigate('overview')" class="nav-item w-full flex items-center gap-3 px-5 py-3.5 rounded-xl transition-all duration-200 text-sm font-medium group text-gray-500 dark:text-gray-400 hover:bg-white dark:hover:bg-gray-700 hover:shadow-sm" data-page="overview"&gt;&lt;i class="fa-solid fa-chart-pie w-5 text-center"&gt;&lt;/i&gt;&lt;span&gt;工作概览&lt;/span&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="router.navigate('customers')" class="nav-item w-full flex items-center gap-3 px-5 py-3.5 rounded-xl transition-all duration-200 text-sm font-medium group text-gray-500 dark:text-gray-400 hover:bg-white dark:hover:bg-gray-700 hover:shadow-sm" data-page="customers"&gt;&lt;i class="fa-solid fa-users w-5 text-center"&gt;&lt;/i&gt;&lt;span&gt;客户管理&lt;/span&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="router.navigate('transactions')" class="nav-item w-full flex items-center gap-3 px-5 py-3.5 rounded-xl transition-all duration-200 text-sm font-medium group text-gray-500 dark:text-gray-400 hover:bg-white dark:hover:bg-gray-700 hover:shadow-sm" data-page="transactions"&gt;&lt;i class="fa-solid fa-stream w-5 text-center"&gt;&lt;/i&gt;&lt;span&gt;业务流水&lt;/span&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="router.navigate('followups')" class="nav-item w-full flex items-center gap-3 px-5 py-3.5 rounded-xl transition-all duration-200 text-sm font-medium group text-gray-500 dark:text-gray-400 hover:bg-white dark:hover:bg-gray-700 hover:shadow-sm" data-page="followups"&gt;&lt;i class="fa-solid fa-comments w-5 text-center"&gt;&lt;/i&gt;&lt;span&gt;跟进中心&lt;/span&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="my-6 border-t border-gray-200 dark:border-gray-700 mx-4"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="showBusinessModal()" class="w-full flex items-center justify-center gap-2 px-4 py-3 bg-primary text-white rounded-xl shadow-lg hover:bg-primaryDark transition-all hover:-translate-y-0.5 text-sm font-bold"&gt;&lt;i class="fa-solid fa-plus"&gt;&lt;/i&gt; 新增业务&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/nav&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="p-4 mt-auto"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="router.navigate('mine')" class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all bg-white/50 dark:bg-gray-700/50 border border-white dark:border-gray-600 shadow-sm hover:bg-white dark:hover:bg-gray-700" data-page="mine"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-600 flex items-center justify-center text-gray-500 dark:text-gray-300 text-xs"&gt;&lt;i class="fa-solid fa-user"&gt;&lt;/i&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="text-left flex-1"&gt;&lt;p class="text-xs font-bold text-gray-800 dark:text-white"&gt;我的账户&lt;/p&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;/aside&gt;</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &lt;main class="flex-1 h-full overflow-hidden flex flex-col relative rounded-[2rem] md:glass-panel shadow-sm bg-white/30 dark:bg-gray-900/30 backdrop-blur-xl border border-white/50 dark:border-gray-700/50"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;header class="px-6 py-5 flex justify-between items-center z-10 shrink-0"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h2 id="page-title" class="text-xl font-bold text-gray-800 dark:text-white tracking-tight"&gt;概览&lt;/h2&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p class="text-xs text-gray-500 dark:text-gray-400 mt-0.5 font-medium" id="current-date"&gt;--&lt;/p&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="relative z-50"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="toggleNotifications()" class="w-10 h-10 rounded-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 flex items-center justify-center shadow-sm transition-all relative"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i id="notif-bell" class="fa-regular fa-bell"&gt;&lt;/i&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span id="notif-dot" class="absolute top-2 right-2.5 w-2 h-2 bg-red-500 rounded-full border border-white dark:border-gray-800 hidden"&gt;&lt;/span&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="notif-dropdown" class="hidden absolute right-0 top-12 w-80 bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-700 overflow-hidden animate-slide-up origin-top-right text-left"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="px-4 py-3 border-b border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50 flex justify-between items-center"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 class="text-sm font-bold text-gray-800 dark:text-white"&gt;智能提醒&lt;/h3&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span id="notif-count" class="text-[10px] bg-primary text-white px-1.5 py-0.5 rounded font-bold"&gt;0&lt;/span&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="notif-list" class="max-h-[300px] overflow-y-auto custom-scroll p-2 space-y-1"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/header&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="content-area" class="flex-1 overflow-y-auto px-4 md:px-8 pb-24 md:pb-8 custom-scroll relative"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;nav class="md:hidden absolute bottom-6 left-6 right-6 bg-white/90 dark:bg-gray-900/95 backdrop-blur-xl rounded-2xl py-3 px-4 z-30 flex justify-between items-center shadow-2xl shadow-gray-500/20 text-gray-400 dark:text-gray-500"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="router.navigate('overview')" class="nav-item-m flex-1 flex flex-col items-center gap-1 text-[10px] transition-all hover:text-primary" data-page="overview"&gt;&lt;i class="fa-solid fa-chart-pie text-2xl"&gt;&lt;/i&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="router.navigate('customers')" class="nav-item-m flex-1 flex flex-col items-center gap-1 text-[10px] transition-all hover:text-primary" data-page="customers"&gt;&lt;i class="fa-solid fa-users text-2xl"&gt;&lt;/i&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="showBusinessModal()" class="flex-1 -mt-8"&gt;&lt;div class="w-16 h-16 bg-primary rounded-full flex items-center justify-center text-white shadow-lg shadow-primary/40 border-4 border-[#F3F4F6] dark:border-gray-900 mx-auto transition-colors"&gt;&lt;i class="fa-solid fa-plus text-2xl"&gt;&lt;/i&gt;&lt;/div&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="router.navigate('followups')" class="nav-item-m flex-1 flex flex-col items-center gap-1 text-[10px] transition-all hover:text-primary" data-page="followups"&gt;&lt;i class="fa-solid fa-comments text-2xl"&gt;&lt;/i&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="router.navigate('mine')" class="nav-item-m flex-1 flex flex-col items-center gap-1 text-[10px] transition-all hover:text-primary" data-page="mine"&gt;&lt;i class="fa-solid fa-user text-2xl"&gt;&lt;/i&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/nav&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;/main&gt;<br />&nbsp; &nbsp; &lt;/div&gt;</p>
<p>&nbsp; &nbsp; &lt;div id="modal-overlay" class="hidden fixed inset-0 bg-gray-900/20 backdrop-blur-[2px] z-40 transition-opacity duration-300" onclick="closeAllModals()"&gt;&lt;/div&gt;</p>
<p>&nbsp; &nbsp; &lt;div id="confirm-modal" class="hidden fixed inset-0 z-[60] flex items-center justify-center p-4 pointer-events-none"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="pointer-events-auto w-full max-w-xs bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-2xl animate-slide-up ring-1 ring-black/5 text-center"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="w-12 h-12 bg-red-100 dark:bg-red-900/30 text-red-500 rounded-full flex items-center justify-center mx-auto mb-4 text-xl"&gt;&lt;i class="fa-solid fa-triangle-exclamation"&gt;&lt;/i&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 class="font-bold text-gray-800 dark:text-white text-lg mb-2"&gt;确认删除?&lt;/h3&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p class="text-xs text-gray-500 dark:text-gray-400 mb-6 leading-relaxed"&gt;删除后该客户的所有资产、流水及跟进记录将无法恢复。&lt;/p&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex gap-3"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="closeConfirmModal()" class="flex-1 py-2.5 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-sm font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition-all"&gt;取消&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="executeDelete()" class="flex-1 py-2.5 rounded-xl bg-red-500 text-white text-sm font-bold hover:bg-red-600 shadow-lg shadow-red-200 dark:shadow-none transition-all"&gt;确认删除&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &lt;/div&gt;</p>
<p>&nbsp; &nbsp; &lt;div id="business-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="pointer-events-auto w-full max-w-lg bg-white/90 dark:bg-gray-800/95 backdrop-blur-xl rounded-[2rem] p-8 shadow-2xl animate-slide-up ring-1 ring-gray-900/5"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex justify-between items-center mb-6"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;&lt;h3 class="text-xl font-bold text-gray-800 dark:text-white"&gt;业务办理&lt;/h3&gt;&lt;p class="text-xs text-gray-400"&gt;Transaction Entry&lt;/p&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="closeAllModals()" class="w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-500 flex items-center justify-center transition-all"&gt;&lt;i class="fa-solid fa-times"&gt;&lt;/i&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-4"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;input type="hidden" id="biz-edit-id"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="relative group z-20"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1"&gt;选择客户&lt;/label&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex gap-2"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="text" id="biz-search-input" placeholder="输入姓名或手机号" class="flex-1 min-w-0 px-4 py-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:bg-white dark:focus:bg-gray-800 focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all text-sm dark:text-white"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="searchCustomerForBiz()" class="shrink-0 bg-primary text-white px-4 rounded-xl shadow-md hover:bg-primaryDark transition-all"&gt;&lt;i class="fa-solid fa-search"&gt;&lt;/i&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="biz-search-results" class="hidden absolute top-full left-0 w-full bg-white dark:bg-gray-800 shadow-xl rounded-xl mt-1 z-50 p-2 max-h-40 overflow-auto border border-gray-100 dark:border-gray-700"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="biz-selected-customer" class="hidden mt-2 p-3 bg-primary/10 rounded-xl text-sm flex justify-between items-center text-primaryDark font-bold border border-primary/20"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex items-center gap-2"&gt;&lt;div class="w-6 h-6 rounded-full bg-white flex items-center justify-center text-primary text-xs"&gt;&lt;i class="fa-solid fa-user"&gt;&lt;/i&gt;&lt;/div&gt;&lt;span id="biz-customer-name"&gt;&lt;/span&gt;&lt;/div&gt;&lt;i class="fa-solid fa-check-circle text-primary"&gt;&lt;/i&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="grid grid-cols-1 md:grid-cols-2 gap-4"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;&lt;label class="block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1"&gt;金额 (万元)&lt;/label&gt;&lt;input type="number" id="biz-amount" class="w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:bg-white dark:focus:bg-gray-800 focus:border-primary outline-none text-sm font-mono font-bold dark:text-white" placeholder="0.00" step="0.01"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="min-w-0 overflow-hidden"&gt;&lt;label class="block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1"&gt;日期&lt;/label&gt;&lt;input type="date" id="biz-date" class="w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:bg-white dark:focus:bg-gray-800 focus:border-primary outline-none text-sm text-gray-600 dark:text-gray-300 max-w-full"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;&lt;label class="block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1"&gt;业务类型&lt;/label&gt;&lt;select id="biz-type" class="w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:bg-white dark:focus:bg-gray-800 focus:border-primary outline-none text-sm appearance-none cursor-pointer dark:text-white"&gt;&lt;option value="一年定期"&gt;一年定期存款&lt;/option&gt;&lt;option value="两年定期"&gt;两年定期存款&lt;/option&gt;&lt;option value="三年定期"&gt;三年定期存款&lt;/option&gt;&lt;option value="通知存款"&gt;通知存款&lt;/option&gt;&lt;option value="自营理财"&gt;自营理财 (R2)&lt;/option&gt;&lt;option value="代销理财"&gt;代销理财&lt;/option&gt;&lt;option value="扫码付"&gt;商户扫码付&lt;/option&gt;&lt;option value="消费贷"&gt;个人消费贷&lt;/option&gt;&lt;option value="按揭贷"&gt;住房按揭贷&lt;/option&gt;&lt;/select&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div&gt;&lt;label class="block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1"&gt;备注说明&lt;/label&gt;&lt;textarea id="biz-remark" rows="2" class="w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:bg-white dark:focus:bg-gray-800 focus:border-primary outline-none text-sm resize-none dark:text-white" placeholder="选填..."&gt;&lt;/textarea&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="saveTransaction()" class="w-full py-3.5 bg-primary text-white rounded-xl font-bold shadow-lg hover:bg-primaryDark transition-all mt-2"&gt;确认提交&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &lt;div id="followup-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="pointer-events-auto w-full max-w-md bg-white/90 dark:bg-gray-800/95 backdrop-blur-xl rounded-[2rem] p-6 shadow-2xl animate-slide-up ring-1 ring-gray-900/5"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="flex justify-between items-center mb-6"&gt;&lt;div&gt;&lt;h3 class="text-lg font-bold text-gray-800 dark:text-white"&gt;新增跟进记录&lt;/h3&gt;&lt;p class="text-xs text-gray-400"&gt;Add Follow-up&lt;/p&gt;&lt;/div&gt;&lt;button onclick="closeAllModals()" class="text-gray-400 hover:text-gray-600"&gt;&lt;i class="fa-solid fa-times"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="space-y-4"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="relative group z-20"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class="block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1"&gt;关联客户&lt;/label&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex gap-2"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="text" id="fu-search-input" placeholder="搜索姓名/手机号..." class="flex-1 min-w-0 px-4 py-2.5 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:bg-white dark:focus:bg-gray-800 focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all text-sm dark:text-white"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="searchCustomerForFu()" class="shrink-0 bg-primary text-white px-3 rounded-xl shadow-md hover:bg-primaryDark transition-all"&gt;&lt;i class="fa-solid fa-search"&gt;&lt;/i&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="fu-search-results" class="hidden absolute top-full left-0 w-full bg-white dark:bg-gray-800 shadow-xl rounded-xl mt-1 z-50 p-2 max-h-40 overflow-auto border border-gray-100 dark:border-gray-700"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="fu-selected-customer" class="hidden mt-2 p-2 bg-blue-50 dark:bg-blue-900/30 rounded-xl text-sm flex justify-between items-center text-blue-800 dark:text-blue-300 font-bold border border-blue-100 dark:border-blue-800"&gt;&lt;div class="flex items-center gap-2"&gt;&lt;i class="fa-solid fa-user text-xs"&gt;&lt;/i&gt;&lt;span id="fu-customer-name"&gt;&lt;/span&gt;&lt;/div&gt;&lt;i class="fa-solid fa-check text-xs"&gt;&lt;/i&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="grid grid-cols-4 gap-2 text-xs" id="fu-type-grid"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div onclick="selectFuType(this, '电话回访')" class="fu-type-btn bg-primary text-white p-2.5 text-center rounded-lg cursor-pointer transition-all shadow-md shadow-emerald-100 font-bold"&gt;电话&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div onclick="selectFuType(this, '微信沟通')" class="fu-type-btn bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-300 p-2.5 text-center rounded-lg cursor-pointer transition-all hover:bg-gray-200 dark:hover:bg-gray-600"&gt;微信&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div onclick="selectFuType(this, '上门拜访')" class="fu-type-btn bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-300 p-2.5 text-center rounded-lg cursor-pointer transition-all hover:bg-gray-200 dark:hover:bg-gray-600"&gt;上门&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div onclick="selectFuType(this, '网点接待')" class="fu-type-btn bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-300 p-2.5 text-center rounded-lg cursor-pointer transition-all hover:bg-gray-200 dark:hover:bg-gray-600"&gt;网点&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;input type="hidden" id="fu-type" value="电话回访"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;textarea id="fu-content" class="w-full p-4 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:bg-white dark:focus:bg-gray-800 focus:border-primary outline-none text-sm resize-none dark:text-white" rows="4" placeholder="记录跟进详情..."&gt;&lt;/textarea&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;button onclick="saveFollowup()" class="w-full py-3 bg-primary text-white rounded-xl shadow-lg font-bold hover:bg-primaryDark transition-all"&gt;保存记录&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &lt;/div&gt;</p>
<p>&nbsp; &nbsp; &lt;div id="add-customer-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="pointer-events-auto w-full max-w-lg bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-[2rem] p-8 animate-slide-up max-h-[90vh] overflow-y-auto custom-scroll shadow-2xl ring-1 ring-gray-900/5"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex justify-between mb-6 sticky top-0 pb-2 z-10 border-b border-gray-100 dark:border-gray-700 -mx-8 px-8 pt-2 -mt-2 bg-transparent backdrop-blur-xl"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 class="font-bold text-xl text-gray-800 dark:text-white" id="cust-modal-title"&gt;录入客户&lt;/h3&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="closeAllModals()"&gt;&lt;i class="fa-solid fa-times text-gray-400"&gt;&lt;/i&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-4"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type="hidden" id="cust-edit-id"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="grid grid-cols-2 gap-4"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-1"&gt;&lt;label class="text-xs text-gray-400 font-bold ml-1"&gt;姓名&lt;/label&gt;&lt;input id="cust-name" class="w-full p-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 outline-none focus:border-primary text-sm dark:text-white"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-1"&gt;&lt;label class="text-xs text-gray-400 font-bold ml-1"&gt;性别&lt;/label&gt;&lt;select id="cust-gender" class="w-full p-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 outline-none text-sm dark:text-white"&gt;&lt;option value="男"&gt;男&lt;/option&gt;&lt;option value="女"&gt;女&lt;/option&gt;&lt;/select&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-1"&gt;&lt;label class="text-xs text-gray-400 font-bold ml-1"&gt;手机号码&lt;/label&gt;&lt;input id="cust-phone" class="w-full p-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 outline-none focus:border-primary text-sm font-mono dark:text-white"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-1"&gt;&lt;label class="text-xs text-gray-400 font-bold ml-1"&gt;身份证号&lt;/label&gt;&lt;input id="cust-idcard" class="w-full p-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 outline-none focus:border-primary text-sm font-mono dark:text-white"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="grid grid-cols-2 gap-4"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="space-y-1"&gt;&lt;label class="text-xs text-gray-400 font-bold ml-1"&gt;客户号&lt;/label&gt;&lt;input id="cust-no" class="w-full p-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 outline-none focus:border-primary text-sm font-mono dark:text-white"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="space-y-1"&gt;&lt;label class="text-xs text-gray-400 font-bold ml-1"&gt;来源&lt;/label&gt;&lt;select id="cust-source" class="w-full p-3 rounded-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 outline-none text-sm dark:text-white"&gt;&lt;option value="发单客户"&gt;发单客户&lt;/option&gt;&lt;option value="系统分户"&gt;系统分户&lt;/option&gt;&lt;option value="小红书客户"&gt;小红书客户&lt;/option&gt;&lt;option value="公私联动"&gt;公私联动&lt;/option&gt;&lt;option value="资源客户"&gt;资源客户&lt;/option&gt;&lt;/select&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="saveNewCustomer()" class="w-full py-3.5 bg-primary text-white rounded-xl shadow-lg mt-4 font-bold hover:bg-primaryDark transition-all"&gt;保存信息&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br />&nbsp; &nbsp; &lt;/div&gt;</p>
<p>&nbsp; &nbsp; &lt;div id="customer-detail-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="pointer-events-auto w-full max-w-4xl h-[85vh] bg-surface rounded-[2.5rem] shadow-2xl overflow-hidden animate-slide-up flex flex-col ring-1 ring-black/5 dark:ring-white/10 dark:bg-gray-900"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="bg-white dark:bg-gray-800 p-6 md:p-8 relative shrink-0 border-b border-gray-200 dark:border-gray-700"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="absolute top-6 right-6 flex gap-2"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;button onclick="editCurrentCustomer()" class="w-9 h-9 rounded-full bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300 flex items-center justify-center transition-all border border-gray-200 dark:border-gray-600"&gt;&lt;i class="fa-solid fa-pen text-sm"&gt;&lt;/i&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;button onclick="showDeleteConfirm()" class="w-9 h-9 rounded-full bg-gray-50 dark:bg-gray-700 hover:bg-red-50 dark:hover:bg-red-900/30 text-gray-600 dark:text-gray-300 hover:text-red-500 flex items-center justify-center transition-all border border-gray-200 dark:border-gray-600"&gt;&lt;i class="fa-solid fa-trash text-sm"&gt;&lt;/i&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;button onclick="closeAllModals()" class="w-9 h-9 rounded-full bg-gray-900 dark:bg-white text-white dark:text-black hover:opacity-80 flex items-center justify-center transition-all"&gt;&lt;i class="fa-solid fa-times text-sm"&gt;&lt;/i&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="flex items-center gap-5 mt-2"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div id="detail-avatar" class="w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-200 text-gray-500 rounded-2xl flex items-center justify-center text-2xl font-bold shadow-inner border border-white dark:border-gray-700"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div&gt;&lt;h2 id="detail-name" class="text-2xl font-bold text-gray-900 dark:text-white"&gt;&lt;/h2&gt;&lt;div class="flex items-center gap-2 mt-1"&gt;&lt;span id="detail-level-badge-sm"&gt;&lt;/span&gt;&lt;p id="detail-id" class="text-xs text-gray-400 font-mono"&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="mt-8 flex gap-8 md:gap-16"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div&gt;&lt;p class="text-[10px] text-gray-400 uppercase tracking-wider font-bold mb-1"&gt;AUM 总资产&lt;/p&gt;&lt;p id="detail-assets" class="text-2xl font-bold text-gray-800 dark:text-gray-100 font-mono tracking-tight"&gt;&lt;/p&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div&gt;&lt;p class="text-[10px] text-gray-400 uppercase tracking-wider font-bold mb-1"&gt;交易次数&lt;/p&gt;&lt;p id="detail-tx-count" class="text-2xl font-bold text-gray-800 dark:text-gray-100 font-mono tracking-tight"&gt;&lt;/p&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="flex-1 overflow-y-auto p-4 md:p-8 space-y-6 custom-scroll bg-[#F9FAFB] dark:bg-gray-900/50"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div id="detail-basic-info" class="bg-white dark:bg-gray-800 p-6 rounded-2xl grid grid-cols-2 md:grid-cols-4 gap-4 text-sm shadow-sm border border-gray-100 dark:border-gray-700 dark:text-gray-300"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="grid grid-cols-1 lg:grid-cols-2 gap-6"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="flex flex-col"&gt;&lt;h4 class="font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2 text-sm"&gt;&lt;span class="w-1.5 h-4 bg-primary rounded-full"&gt;&lt;/span&gt; 业务流水&lt;/h4&gt;&lt;div id="detail-tx-list" class="flex-1 space-y-3"&gt;&lt;/div&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="flex flex-col"&gt;&lt;h4 class="font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2 text-sm"&gt;&lt;span class="w-1.5 h-4 bg-blue-500 rounded-full"&gt;&lt;/span&gt; 跟进记录&lt;/h4&gt;&lt;div id="detail-fu-list" class="flex-1 space-y-3"&gt;&lt;/div&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &lt;/div&gt;</p>
<p>&nbsp; &nbsp; &lt;script&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; // ✨ STORE_KEY 升级 V10.0<br />&nbsp; &nbsp; &nbsp; &nbsp; const STORE_KEY = 'hbc_crm_v10_0_enhanced';<br />&nbsp; &nbsp; &nbsp; &nbsp; let appState = {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; theme: 'default',<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; darkMode: false,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; privacyMode: false<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; const PrivacyUtils = {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; maskName: (name) =&gt; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!name || !appState.privacyMode) return name;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return name.length &gt; 1 ? name.substring(0, name.length - 1) + '*' : name;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; maskMoney: (amount) =&gt; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!appState.privacyMode) return formatWan(amount);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return '&lt;i class="fa-solid fa-eye-slash text-gray-400 text-sm"&gt;&lt;/i&gt;';<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; maskID: (id) =&gt; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!id || !appState.privacyMode) return id;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return id.replace(/^(\d{6})\d{6}(\d{4,})$/, '$1******$2');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; maskPhone: (phone) =&gt; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!phone || !appState.privacyMode) return phone;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return phone.replace(/^(\d{3})\d{5}(\d{3})$/, '$1*****$2');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; maskCustNo: (no) =&gt; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!no || !appState.privacyMode) return no;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return no.length &gt; 3 ? no.slice(0, -3) + '***' : '***';<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; function formatWan(amount) {&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const val = parseFloat(amount) ||<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return '&yen;' + (val / 10000).toFixed(2) + '万';&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; function generateMockHistory() {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const types = ['一年定期', '两年定期', '自营理财', '代销理财', '扫码付', '消费贷'];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const txs = [];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const today = new Date();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for(let i=0; i&lt;30; i++) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const date = new Date(today);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; date.setDate(today.getDate() - Math.floor(Math.random() * 90));<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; txs.push({<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; id: `mock_${i}`,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; custId: (Math.floor(Math.random() * 3) + 1).toString(),<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; amount: Math.floor(Math.random() * 950000) + 50000,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: types[Math.floor(Math.random() * types.length)],<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; date: date.toISOString().split('T')[0],<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; remark: i % 3 === 0 ? '客户主动联系' : ''<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return txs.sort((a,b) =&gt; new Date(b.date) - new Date(a.date));<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; const defaultData = {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; customers: [<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { id: '1', name: '王富贵', gender: '男', phone: '13800138000', idcard: '420101198012051234', custNo: 'C88291', assets: 0, source: '发单客户' },&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { id: '2', name: '李淑芬', gender: '女', phone: '13900139000', idcard: '420101198502025678', custNo: 'C99102', assets: 0, source: '系统分户' },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { id: '3', name: '张伟', gender: '男', phone: '13700137000', idcard: '420101199003039999', custNo: 'C11203', assets: 0, source: '小红书客户' },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ],<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; transactions: generateMockHistory(),<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; followups: [<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { id: 'f1', custId: '1', type: '电话回访', content: '通知大额存单利率调整，客户表示下周二有空来店。', date: '2025-12-01 10:00' },&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { id: 'f2', custId: '2', type: '微信沟通', content: '发送了最新的理财产品海报，客户询问R3级产品的风险情况。', date: '2025-11-26 14:30' }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ],<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentUser: null, users: [],<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; appState: appState&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; const db = {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; data: null,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; init() {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const stored = localStorage.getItem(STORE_KEY);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.data = stored ? JSON.parse(stored) : JSON.parse(JSON.stringify(defaultData));<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(this.data.appState) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; appState = this.data.appState;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!appState.theme) appState.theme = 'default';<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; applyTheme(appState.theme);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; applyDarkMode(appState.darkMode);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; togglePrivacyMode(appState.privacyMode, false); // 初始化隐私模式 UI<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!stored) this.save();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.recalcAllAssets();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; checkNotifications();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; save() {&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.data.appState = appState;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; localStorage.setItem(STORE_KEY, JSON.stringify(this.data));&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; checkNotifications();&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addCustomer(c) { c.id = Date.now().toString() + Math.floor(Math.random()*1000);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c.assets=0; this.data.customers.unshift(c); this.save(); },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; updateCustomer(c) { const idx=this.data.customers.findIndex(x=&gt;x.id===c.id);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(idx!==-1){this.data.customers[idx]={...this.data.customers[idx],...c};this.save();} },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; deleteCustomer(id) { this.data.customers=this.data.customers.filter(c=&gt;c.id!==id); this.data.transactions=this.data.transactions.filter(t=&gt;t.custId!==id); this.data.followups=this.data.followups.filter(f=&gt;f.custId!==id); this.save();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addTransaction(t) { t.id='t'+Date.now(); this.data.transactions.unshift(t); this.recalcAssets(t.custId); this.save();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; recalcAssets(custId) { const c=this.data.customers.find(x=&gt;x.id===custId); if(c){ c.assets = this.data.transactions.filter(tx=&gt;tx.custId===custId).reduce((sum,tx)=&gt;sum+parseFloat(tx.amount),0);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; recalcAllAssets() { this.data.customers.forEach(c =&gt; this.recalcAssets(c.id));<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addFollowup(f) {&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f.id='f'+Date.now();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const now = new Date();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f.date = `${now.getFullYear()}-${String(now.getMonth()+1).padStart(2,'0')}-${String(now.getDate()).padStart(2,'0')} ${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}`;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.data.followups.unshift(f);&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.save();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; getStats() {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const todayStr = new Date().toISOString().split('T')[0];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; todayAmount: this.data.transactions.filter(t=&gt;t.date===todayStr).reduce((sum,t)=&gt;sum+parseFloat(t.amount),0),<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; totalAmount: this.data.transactions.reduce((sum,t)=&gt;sum+parseFloat(t.amount),0),<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; customerCount: this.data.customers.length,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; txCount: this.data.transactions.length,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; todayFollowup: this.data.followups.filter(f=&gt;f.date.startsWith(todayStr)).length<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; registerUser(id,name,pwd) { if(!this.data.users) this.data.users=[]; if(this.data.users.find(u=&gt;u.id===id)) return false; this.data.users.push({id,name,pwd});<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.save(); return true; },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; loginUser(id,pwd) { if(!this.data.users) this.data.users=[];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(this.data.users.length===0) return {id,name:'管理员'}; return this.data.users.find(u=&gt;u.id===id&amp;&amp;u.pwd===pwd); }<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; function applyTheme(themeName) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.documentElement.setAttribute('data-theme', themeName);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; appState.theme = themeName;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db.save();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const avatar = document.getElementById('mine-avatar-bg');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(avatar) avatar.className = `w-20 h-20 text-white rounded-full mx-auto flex items-center justify-center text-3xl mb-4 shadow-xl shadow-gray-300 dark:shadow-none bg-primary`;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; updateThemeSelectionUI();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(window.echarts &amp;&amp; document.getElementById('chart-pie')) initCharts('week');<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; function updateThemeSelectionUI() {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const themes = ['default', 'pink', 'blue'];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; themes.forEach(t =&gt; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const el = document.getElementById(`theme-opt-${t}`);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(el) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(appState.theme === t) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; el.className = `cursor-pointer flex flex-col items-center gap-2 p-3 rounded-xl border border-${t==='default'?'emerald':t}-500 bg-${t==='default'?'emerald':t}-50 dark:bg-${t==='default'?'emerald':t}-900/30`;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; el.className = `cursor-pointer flex flex-col items-center gap-2 p-3 rounded-xl border border-transparent bg-gray-50 dark:bg-gray-800`;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; function applyDarkMode(isDark) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isDark) document.documentElement.classList.add('dark');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else document.documentElement.classList.remove('dark');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; appState.darkMode = isDark;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db.save();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const btn = document.getElementById('dm-toggle-bg');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const circle = document.getElementById('dm-toggle-circle');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(btn &amp;&amp; circle) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; btn.className = `w-12 h-6 rounded-full transition-colors relative ${isDark?'bg-primary':'bg-gray-300'}`;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; circle.className = `absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${isDark?'translate-x-6':''}`;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; // ✨ 新增切换隐私模式函数<br />&nbsp; &nbsp; &nbsp; &nbsp; function togglePrivacyMode(isPrivacy, save = true) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; appState.privacyMode = isPrivacy;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(save) db.save();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const btn = document.getElementById('pm-toggle-bg');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const circle = document.getElementById('pm-toggle-circle');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(btn &amp;&amp; circle) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; btn.className = `w-12 h-6 rounded-full transition-colors relative ${isPrivacy?'bg-primary':'bg-gray-300'}`;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; circle.className = `absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${isPrivacy?'translate-x-6':''}`;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(router.currentPage !== 'login' &amp;&amp; router.currentPage !== 'mine') router.navigate(router.currentPage);<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; function checkNotifications() {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const msgs = [];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const today = new Date();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db.data.customers.forEach(c =&gt; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(c.idcard &amp;&amp; c.idcard.length === 18) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const month = parseInt(c.idcard.substring(10, 12));<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const day = parseInt(c.idcard.substring(12, 14));<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const thisYearBday = new Date(today.getFullYear(), month - 1, day);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const diff = (thisYearBday - today) / (1000 * 60 * 60 * 24);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(diff &gt;= 0 &amp;&amp; diff &lt;= 7) msgs.push({type: 'birthday', text: `客户 ${c.name} 生日将在 ${Math.ceil(diff)} 天后`, id: c.id});<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db.data.transactions.forEach(t =&gt; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(t.type.includes('定期')) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let duration = 0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(t.type.includes('一年')) duration = 12; else if(t.type.includes('两年')) duration = 24; else if(t.type.includes('三年')) duration = 36;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(duration &gt; 0) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const startDate = new Date(t.date);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const endDate = new Date(startDate.setMonth(startDate.getMonth() + duration));<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const diff = (endDate - today) / (1000 * 60 * 60 * 24);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(diff &gt;= 0 &amp;&amp; diff &lt;= 30) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const c = db.data.customers.find(x =&gt; x.id === t.custId);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(c) msgs.push({type: 'expire', text: `客户 ${c.name} 的${t.type}还有 ${Math.ceil(diff)} 天到期`, id: c.id});<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db.data.customers.forEach(c =&gt; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(c.assets &gt; 200000) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const lastFu = db.data.followups.filter(f =&gt; f.custId === c.id).sort((a,b) =&gt; new Date(b.date) - new Date(a.date))[0];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!lastFu) msgs.push({type: 'churn', text: `高净值客户 ${c.name} 暂无跟进记录`, id: c.id});<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if((today - new Date(lastFu.date)) / (1000 * 60 * 60 * 24) &gt; 30) msgs.push({type: 'churn', text: `高净值客户 ${c.name} 已超过30天未跟进`, id: c.id});<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; updateNotifUI(msgs);<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; function updateNotifUI(msgs) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const bell = document.getElementById('notif-bell');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const dot = document.getElementById('notif-dot');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const count = document.getElementById('notif-count');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const list = document.getElementById('notif-list');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; count.innerText = msgs.length;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(msgs.length &gt; 0) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dot.classList.remove('hidden');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bell.classList.add('animate-bell-shake', 'text-gray-800', 'dark:text-white');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; list.innerHTML = msgs.map(m =&gt; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let icon = 'fa-gift text-pink-500', bg = 'bg-pink-50 dark:bg-pink-900/30';<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(m.type === 'expire') { icon = 'fa-clock text-orange-500'; bg = 'bg-orange-50 dark:bg-orange-900/30'; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(m.type === 'churn') { icon = 'fa-user-clock text-red-500'; bg = 'bg-red-50 dark:bg-red-900/30'; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return `&lt;div onclick="router.navigate('customers');showDetail('${m.id}')" class="p-3 rounded-xl ${bg} hover:brightness-95 cursor-pointer flex gap-3 items-center"&gt;&lt;div class="w-8 h-8 rounded-full bg-white dark:bg-gray-800 flex items-center justify-center shadow-sm shrink-0"&gt;&lt;i class="fa-solid ${icon} text-xs"&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class="text-xs text-gray-700 dark:text-gray-300 font-medium"&gt;${m.text}&lt;/span&gt;&lt;/div&gt;`;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }).join('');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else { dot.classList.add('hidden'); bell.classList.remove('animate-bell-shake'); list.innerHTML = `&lt;div class="text-center py-8 text-gray-400 text-xs"&gt;暂无重要提醒&lt;/div&gt;`;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; function toggleNotifications() { document.getElementById('notif-dropdown').classList.toggle('hidden');<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; const router = {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentPage: 'login',<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; navigate(page) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.currentPage = page;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; updateDate();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.querySelectorAll('.nav-item').forEach(el=&gt;{&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(el.dataset.page===page){<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; el.classList.add('bg-white','dark:bg-gray-700','text-primary','shadow-sm','font-bold');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; el.classList.remove('text-gray-500','dark:text-gray-400');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; el.querySelector('i').classList.add('text-primary');&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; el.classList.remove('bg-white','dark:bg-gray-700','text-primary','shadow-sm','font-bold');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; el.classList.add('text-gray-500','dark:text-gray-400');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; el.querySelector('i').classList.remove('text-primary');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.querySelectorAll('.nav-item-m').forEach(el=&gt;{&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(el.dataset.page===page){<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; el.classList.remove('text-gray-400','dark:text-gray-500');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; el.classList.add('text-primary','font-bold');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; el.classList.add('text-gray-400','dark:text-gray-500');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; el.classList.remove('text-primary','font-bold');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.getElementById('page-title').innerText = page==='overview'?'工作概览':page==='customers'?'客户管理':page==='transactions'?'业务流水':page==='followups'?'跟进中心':page==='mine'?'个人中心':'';<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const container=document.getElementById('content-area');&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // ✨ 优化页面切换动画<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; container.innerHTML=''; container.classList.remove('animate-fade-in-slide-up'); void container.offsetWidth; container.classList.add('animate-fade-in-slide-up');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switch(page){ case 'overview':renderOverview(container);break; case 'customers':renderCustomers(container);break; case 'transactions':renderTransactions(container);break; case 'followups':renderFollowupsPage(container);break;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case 'mine':renderMine(container);break;}<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; function updateDate(){ const d=document.getElementById('current-date'); if(d) d.innerText=new Date().toLocaleDateString('zh-CN',{year:'numeric',month:'long',day:'numeric',weekday:'long'}); }<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; let authMode='login';<br />&nbsp; &nbsp; &nbsp; &nbsp; function switchAuthMode(m){authMode=m;document.querySelectorAll('.auth-tab').forEach(e=&gt;e.classList.remove('active'));document.getElementById(`tab-${m}`).classList.add('active');const b=document.getElementById('auth-btn'),f=document.getElementById('register-fields');if(m==='login'){f.classList.add('hidden');b.innerText='进入系统';}else{f.classList.remove('hidden');b.innerText='注册账号';}}<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; // --- 核心渲染函数 ---<br />&nbsp; &nbsp; &nbsp; &nbsp; // 1. 概览<br />&nbsp; &nbsp; &nbsp; &nbsp; // ✨ 每日名言数组<br />&nbsp; &nbsp; &nbsp; &nbsp; const quotes = [<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "诚信为本，服务至上 &mdash;&mdash; 湖北银行",<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "细节决定成败，服务成就未来",<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "以客户为中心，以价值为导向",<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "专业高效，精益求精",<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "创新驱动，赋能金融"<br />&nbsp; &nbsp; &nbsp; &nbsp; ];<br />&nbsp; &nbsp; &nbsp; &nbsp; const today = new Date().getDate();<br />&nbsp; &nbsp; &nbsp; &nbsp; const dailyQuote = quotes[today % quotes.length];</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; function renderOverview(c) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const stats=db.getStats();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let amountColorClass = 'text-white';&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(stats.todayAmount &lt;= 0) amountColorClass = 'text-red-400';<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if(stats.todayAmount &lt;= 50000) amountColorClass = 'text-emerald-400';<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if(stats.todayAmount &lt;= 200000) amountColorClass = 'text-blue-400';<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else amountColorClass = 'text-purple-400';<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c.innerHTML=`<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-6 max-w-[1400px] mx-auto"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex flex-col gap-6"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="glass-panel p-4 rounded-[1.5rem] overflow-hidden"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex items-center gap-3"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fa-solid fa-bullhorn text-primary"&gt;&lt;/i&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex-1 overflow-hidden"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="animate-marquee whitespace-nowrap text-sm font-medium text-gray-700 dark:text-gray-300"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 📢 今日名言：${dailyQuote}<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="w-full bg-gradient-to-br from-gray-900 to-gray-800 p-8 rounded-[1.5rem] shadow-xl relative overflow-hidden group"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="absolute top-0 right-0 p-6 opacity-10 text-8xl text-white"&gt;&lt;i class="fa-solid fa-chart-line"&gt;&lt;/i&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p class="text-gray-400 text-sm font-bold uppercase tracking-wider mb-2"&gt;今日业绩&lt;/p&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 class="text-4xl font-bold truncate ${amountColorClass}"&gt;${PrivacyUtils.maskMoney(stats.todayAmount)}&lt;/h3&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="grid grid-cols-2 gap-4 w-full"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="glass-panel p-6 rounded-[1.5rem] bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p class="text-blue-700 dark:text-blue-300 text-xs font-bold mb-2"&gt;累计金额&lt;/p&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 class="text-xl font-bold text-blue-900 dark:text-white truncate"&gt;${PrivacyUtils.maskMoney(stats.totalAmount)}&lt;/h3&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div onclick="router.navigate('transactions')" class="glass-panel p-6 rounded-[1.5rem] bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 cursor-pointer hover:border-green-200 transition-colors"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p class="text-green-700 dark:text-green-300 text-xs font-bold mb-2"&gt;总笔数&lt;/p&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex items-end gap-2"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 class="text-2xl font-bold text-green-900 dark:text-white"&gt;${stats.txCount} 笔&lt;/h3&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fa-solid fa-angle-right mb-2 text-green-300"&gt;&lt;/i&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div onclick="router.navigate('followups')" class="glass-panel p-6 rounded-[1.5rem] bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 cursor-pointer hover:border-orange-200 transition-colors"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p class="text-orange-700 dark:text-orange-300 text-xs font-bold mb-2"&gt;今日跟进&lt;/p&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex items-end gap-2"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 class="text-2xl font-bold text-orange-900 dark:text-white"&gt;${stats.todayFollowup} 位&lt;/h3&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span class="text-xs text-orange-500 bg-orange-100 dark:bg-orange-900/50 px-1 rounded mb-1.5 font-bold"&gt;Today&lt;/span&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div onclick="router.navigate('customers')" class="glass-panel p-6 rounded-[1.5rem] bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 cursor-pointer hover:border-purple-200 transition-colors"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p class="text-purple-700 dark:text-purple-300 text-xs font-bold mb-2"&gt;管理客户&lt;/p&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex items-end gap-2"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 class="text-2xl font-bold text-purple-900 dark:text-white"&gt;${stats.customerCount} 人&lt;/h3&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fa-solid fa-angle-right mb-2 text-purple-300"&gt;&lt;/i&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="grid grid-cols-1 lg:grid-cols-2 gap-6"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="glass-panel p-6 rounded-[2rem]"&gt;&lt;h3 class="font-bold text-gray-800 dark:text-white mb-6 text-sm"&gt;业务构成 (金额)&lt;/h3&gt;&lt;div id="chart-pie" class="w-full h-[250px]"&gt;&lt;/div&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="glass-panel p-6 rounded-[2rem]"&gt;&lt;div class="flex justify-between items-center mb-6"&gt;&lt;h3 class="font-bold text-gray-800 dark:text-white text-sm"&gt;业绩走势&lt;/h3&gt;&lt;select onchange="updateLineChart(this.value)" class="text-xs bg-gray-100 dark:bg-gray-700 border-none rounded-lg px-2 py-1 outline-none text-gray-600 dark:text-gray-300 font-bold"&gt;&lt;option value="week"&gt;近一周&lt;/option&gt;&lt;option value="month"&gt;近一月&lt;/option&gt;&lt;/select&gt;&lt;/div&gt;&lt;div id="chart-line" class="w-full h-[250px]"&gt;&lt;/div&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; `;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setTimeout(() =&gt; initCharts('week'), 50);<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; let lineChartInstance = null;<br />&nbsp; &nbsp; &nbsp; &nbsp; let pieChartInstance = null;<br />&nbsp; &nbsp; &nbsp; &nbsp; function initCharts(timeRange) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const pieDom = document.getElementById('chart-pie');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const lineDom = document.getElementById('chart-line');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!pieDom || !lineDom) return;&nbsp;</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(pieChartInstance) { pieChartInstance.dispose(); pieChartInstance = null;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(lineChartInstance) { lineChartInstance.dispose(); lineChartInstance = null;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const typeAmounts = {};<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db.data.transactions.forEach(t =&gt; { typeAmounts[t.type] = (typeAmounts[t.type] || 0) + parseFloat(t.amount); });<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const pieData = Object.keys(typeAmounts).map(k =&gt; ({ value: (typeAmounts[k]/10000).toFixed(2), name: k }));<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const colorPalette = appState.theme === 'pink' ?<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ['#ec4899', '#f472b6', '#fbcfe8'] :&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;appState.theme === 'blue' ?<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ['#3b82f6', '#60a5fa', '#bfdbfe'] :&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;['#059669', '#34d399', '#a7f3d0'];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pieChartInstance = echarts.init(pieDom, appState.darkMode?'dark':null);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pieChartInstance.setOption({<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; backgroundColor: 'transparent',<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color: colorPalette,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tooltip: { trigger: 'item', formatter: '{b}: {c}万 ({d}%)' },&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; series: [{ type: 'pie', radius: ['40%', '70%'], itemStyle: { borderRadius: 8, borderColor: appState.darkMode?'#1f2937':'#fff', borderWidth: 2 }, label: { show: true, formatter:&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '{b}\n{d}%', fontSize: 10, color: appState.darkMode?'#9ca3af':'#6B7280' }, data: pieData }]<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; updateLineChart(timeRange);<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; function updateLineChart(range) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const lineDom = document.getElementById('chart-line');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!lineDom) return;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(lineChartInstance) { lineChartInstance.dispose(); }&nbsp;</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const days = range === 'week' ?<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7 : 30;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const dates = [];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const values = [];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for(let i=days-1; i&gt;=0; i--) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const d = new Date();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; d.setDate(d.getDate()-i);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const fullStr = d.toISOString().slice(0,10);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dates.push(d.toISOString().slice(5,10));<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const sum = db.data.transactions.filter(t =&gt; t.date === fullStr).reduce((acc, t) =&gt; acc + parseFloat(t.amount), 0);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; values.push((sum/10000).toFixed(2));<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const mainColor = appState.theme === 'pink' ?<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '#ec4899' : appState.theme === 'blue' ? '#3b82f6' : '#059669';</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lineChartInstance = echarts.init(lineDom, appState.darkMode?'dark':null);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lineChartInstance.setOption({<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; backgroundColor: 'transparent',<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; grid: { left: 0, right: 10, top: 10, bottom: 0, containLabel: true },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tooltip: { trigger: 'axis', formatter: '{b}: {c}万' },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xAxis: { type: 'category', data: dates, axisLine: { show: false }, axisTick: { show: false },&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; axisLabel: { color: appState.darkMode?'#9ca3af':'#9CA3AF', fontSize: 10 } },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yAxis: { type: 'value', splitLine: { lineStyle: { type: 'dashed', color: appState.darkMode?'#374151':'#E5E7EB' } }, axisLabel: { show: false } },<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; series: [{ type: 'line', smooth: true, symbol: 'circle', symbolSize: 6, lineStyle: { width: 3, color: mainColor }, itemStyle: { color: mainColor }, areaStyle: { color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{ offset: 0, color: mainColor + '33' }, { offset: 1, color:&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mainColor + '00' }]) }, data: values }]<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; // 2. 个人中心<br />&nbsp; &nbsp; &nbsp; &nbsp; function renderMine(c) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const user = db.data.currentUser ||<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { id: 'Unknown', name: 'User' };<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;c.innerHTML = `<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="mine-root" class="space-y-6 max-w-2xl mx-auto animate-fade-in pb-12"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="glass-panel p-8 rounded-[2rem] text-center relative overflow-hidden group"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="absolute top-0 right-0 w-32 h-32 bg-primary/20 rounded-full blur-3xl -z-10 transition-colors"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="mine-avatar-bg" class="w-20 h-20 text-white rounded-full mx-auto flex items-center justify-center text-3xl mb-4 shadow-xl shadow-gray-300 dark:shadow-none bg-primary"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fa-solid fa-user-tie"&gt;&lt;/i&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h2 class="text-xl font-bold text-gray-800 dark:text-white"&gt;${user.name ||<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '客户经理'}&lt;/h2&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex justify-center gap-2 mt-2"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p class="text-xs text-gray-500 dark:text-gray-400 font-mono bg-white dark:bg-gray-700 px-2 py-1 rounded border border-gray-100 dark:border-gray-600"&gt;ID: ${user.id}&lt;/p&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span class="text-[10px] text-primary bg-primary/10 px-2 py-1 rounded border border-primary/20 font-bold"&gt;&lt;i class="fa-solid fa-shield-halved mr-1"&gt;&lt;/i&gt;本地可信存储&lt;/span&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-4"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div onclick="renderSubMenu('settings')"&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; class="glass-panel p-5 rounded-2xl flex items-center justify-between cursor-pointer hover:border-primary/50 transition-colors"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex items-center gap-4"&gt;&lt;div class="w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 flex items-center justify-center"&gt;&lt;i class="fa-solid fa-gear"&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class="font-bold text-gray-700 dark:text-gray-200 text-sm"&gt;系统设置&lt;/span&gt;&lt;/div&gt;&lt;i class="fa-solid fa-angle-right text-gray-300"&gt;&lt;/i&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div onclick="renderSubMenu('sysData')" class="glass-panel p-5 rounded-2xl flex items-center justify-between cursor-pointer hover:border-blue-200 transition-colors"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex items-center gap-4"&gt;&lt;div class="w-10 h-10 rounded-xl bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center"&gt;&lt;i class="fa-solid fa-server"&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class="font-bold text-gray-700 dark:text-gray-200 text-sm"&gt;系统数据中心&lt;/span&gt;&lt;/div&gt;&lt;i class="fa-solid fa-angle-right text-gray-300"&gt;&lt;/i&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div onclick="renderSubMenu('custData')" class="glass-panel p-5 rounded-2xl flex items-center justify-between cursor-pointer hover:border-teal-200 transition-colors"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex items-center gap-4"&gt;&lt;div class="w-10 h-10 rounded-xl bg-teal-50 dark:bg-teal-900/30 text-teal-600 dark:text-teal-400 flex items-center justify-center"&gt;&lt;i class="fa-solid fa-users-gear"&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class="font-bold text-gray-700 dark:text-gray-200 text-sm"&gt;客户数据中心&lt;/span&gt;&lt;/div&gt;&lt;i class="fa-solid fa-angle-right text-gray-300"&gt;&lt;/i&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div onclick="renderSubMenu('guide')" class="glass-panel p-5 rounded-2xl flex items-center justify-between cursor-pointer hover:border-green-200 transition-colors"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex items-center gap-4"&gt;&lt;div class="w-10 h-10 rounded-xl bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 flex items-center justify-center"&gt;&lt;i class="fa-solid fa-book-open"&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class="font-bold text-gray-700 dark:text-gray-200 text-sm"&gt;系统使用指南&lt;/span&gt;&lt;/div&gt;&lt;i class="fa-solid fa-angle-right text-gray-300"&gt;&lt;/i&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div onclick="renderSubMenu('version')" class="glass-panel p-5 rounded-2xl flex items-center justify-between cursor-pointer hover:border-purple-200 transition-colors"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex items-center gap-4"&gt;&lt;div class="w-10 h-10 rounded-xl bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 flex items-center justify-center"&gt;&lt;i class="fa-solid fa-circle-info"&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class="font-bold text-gray-700 dark:text-gray-200 text-sm"&gt;关于版本&lt;/span&gt;&lt;/div&gt;&lt;i class="fa-solid fa-angle-right text-gray-300"&gt;&lt;/i&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div onclick="manualLogout()" class="glass-panel p-5 rounded-2xl flex items-center justify-between cursor-pointer hover:border-red-200 transition-colors group"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex items-center gap-4"&gt;&lt;div class="w-10 h-10 rounded-xl bg-red-50 dark:bg-red-900/30 text-red-500 flex items-center justify-center group-hover:bg-red-500 group-hover:text-white transition-colors"&gt;&lt;i class="fa-solid fa-power-off"&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class="font-bold text-red-500 text-sm"&gt;安全退出&lt;/span&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="sub-menu-container" class="hidden h-full flex flex-col animate-slide-left"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;`;<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; function manualLogout() {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(confirm('确定要退出登录吗？')){<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db.data.currentUser = null;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db.save();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.getElementById('app-container').classList.add('hidden');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.getElementById('login-page').style.display = 'flex';<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.getElementById('auth-pwd').value = '';&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; router.currentPage = 'login';<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; function renderSubMenu(type) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const root = document.getElementById('mine-root');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const sub = document.getElementById('sub-menu-container');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; root.classList.add('hidden');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sub.classList.remove('hidden');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let content = '';<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const header = (title) =&gt; `&lt;div class="flex items-center gap-4 mb-6"&gt;&lt;button onclick="closeSubMenu()" class="w-8 h-8 rounded-full bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 flex items-center justify-center text-gray-500 dark:text-gray-300"&gt;&lt;i class="fa-solid fa-arrow-left"&gt;&lt;/i&gt;&lt;/button&gt;&lt;h2 class="text-xl font-bold text-gray-800 dark:text-white"&gt;${title}&lt;/h2&gt;&lt;/div&gt;`;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (type === 'settings') {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; content = `<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ${header('系统设置')}<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-4"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="glass-panel p-5 rounded-2xl space-y-4"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 class="text-sm font-bold text-gray-500 dark:text-gray-400 uppercase"&gt;主题风格&lt;/h3&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="grid grid-cols-3 gap-3"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="theme-opt-default" onclick="applyTheme('default')" class="cursor-pointer flex flex-col items-center gap-2 p-3 rounded-xl border ${appState.theme==='default'?'border-emerald-500 bg-emerald-50 dark:bg-emerald-900/30':'border-transparent bg-gray-50 dark:bg-gray-800'}"&gt;&lt;div class="w-6 h-6 rounded-full bg-emerald-600"&gt;&lt;/div&gt;&lt;span class="text-xs font-bold text-gray-600 dark:text-gray-300"&gt;默认绿&lt;/span&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="theme-opt-pink" onclick="applyTheme('pink')" class="cursor-pointer flex flex-col items-center gap-2 p-3 rounded-xl border ${appState.theme==='pink'?'border-pink-500 bg-pink-50 dark:bg-pink-900/30':'border-transparent bg-gray-50 dark:bg-gray-800'}"&gt;&lt;div class="w-6 h-6 rounded-full bg-pink-500"&gt;&lt;/div&gt;&lt;span class="text-xs font-bold text-gray-600 dark:text-gray-300"&gt;少女粉&lt;/span&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="theme-opt-blue" onclick="applyTheme('blue')" class="cursor-pointer flex flex-col items-center gap-2 p-3 rounded-xl border ${appState.theme==='blue'?'border-blue-500 bg-blue-50 dark:bg-blue-900/30':'border-transparent bg-gray-50 dark:bg-gray-800'}"&gt;&lt;div class="w-6 h-6 rounded-full bg-blue-500"&gt;&lt;/div&gt;&lt;span class="text-xs font-bold text-gray-600 dark:text-gray-300"&gt;星辰蓝&lt;/span&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="glass-panel p-5 rounded-2xl&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; flex items-center justify-between"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex items-center gap-3"&gt;&lt;div class="w-8 h-8 rounded-lg bg-gray-800 text-white flex items-center justify-center"&gt;&lt;i class="fa-solid fa-moon"&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class="font-bold text-gray-700 dark:text-gray-200 text-sm"&gt;黑夜模式&lt;/span&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="applyDarkMode(!appState.darkMode)" id="dm-toggle-bg" class="w-12 h-6 rounded-full transition-colors relative ${appState.darkMode?'bg-primary':'bg-gray-300'}"&gt;&lt;div id="dm-toggle-circle" class="absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${appState.darkMode?'translate-x-6':''}"&gt;&lt;/div&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="glass-panel p-5 rounded-2xl flex items-center justify-between"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex items-center gap-3"&gt;&lt;div class="w-8 h-8 rounded-lg bg-indigo-500 text-white flex items-center justify-center"&gt;&lt;i class="fa-solid fa-user-secret"&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class="font-bold text-gray-700 dark:text-gray-200 text-sm"&gt;隐私卫士模式&lt;/span&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="togglePrivacyMode(!appState.privacyMode)" id="pm-toggle-bg" class="w-12 h-6 rounded-full transition-colors relative ${appState.privacyMode?'bg-primary':'bg-gray-300'}"&gt;&lt;div id="pm-toggle-circle" class="absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${appState.privacyMode?'translate-x-6':''}"&gt;&lt;/div&gt;&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;p class="text-[10px] text-gray-400 px-2"&gt;* 隐私模式将隐藏客户姓名、金额、身份证号等敏感信息。&lt;/p&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; `;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (type === 'sysData') {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; content = `<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ${header('系统数据中心')}<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-3"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div onclick="exportData()" class="glass-panel p-5 rounded-2xl flex items-center gap-4 cursor-pointer hover:border-blue-200"&gt;&lt;div class="w-10&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; h-10 rounded-xl bg-blue-100 text-blue-600 flex items-center justify-center"&gt;&lt;i class="fa-solid fa-cloud-download-alt"&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;h4 class="font-bold text-gray-800 dark:text-white text-sm"&gt;全量数据备份&lt;/h4&gt;&lt;p class="text-xs text-gray-500 mt-0.5"&gt;导出所有数据的 JSON 文件&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="glass-panel p-5 rounded-2xl flex items-center gap-4 cursor-pointer hover:border-orange-200 relative"&gt;&lt;div class="w-10 h-10 rounded-xl bg-orange-100 text-orange-600 flex items-center justify-center"&gt;&lt;i class="fa-solid fa-cloud-upload-alt"&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;h4 class="font-bold text-gray-800 dark:text-white text-sm"&gt;全量数据恢复&lt;/h4&gt;&lt;p class="text-xs text-gray-500 mt-0.5"&gt;从 JSON 文件恢复数据&lt;/p&gt;&lt;/div&gt;&lt;input type="file" onchange="importData(this)" class="absolute inset-0 opacity-0 cursor-pointer" accept=".json"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; `;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (type === 'custData') {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; content = `<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ${header('客户数据中心')}<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-6 max-h-[60vh] overflow-y-auto p-2"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-3"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h4 class="text-xs font-bold text-gray-400 uppercase ml-2"&gt;客户档案管理&lt;/h4&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div onclick="downloadTemplate()" class="glass-panel p-5 rounded-2xl flex items-center gap-4 cursor-pointer hover:border-indigo-200"&gt;&lt;div class="w-10 h-10 rounded-xl bg-indigo-100 text-indigo-600 flex items-center justify-center"&gt;&lt;i class="fa-solid fa-file-csv"&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;h4 class="font-bold text-gray-800 dark:text-white text-sm"&gt;下载客户导入模板&lt;/h4&gt;&lt;p class="text-xs text-gray-500 mt-0.5"&gt;获取客户档案标准 CSV 模板&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="glass-panel p-5 rounded-2xl flex items-center gap-4 cursor-pointer hover:border-teal-200 relative"&gt;&lt;div class="w-10 h-10 rounded-xl bg-teal-100 text-teal-600 flex items-center justify-center"&gt;&lt;i class="fa-solid fa-upload"&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;h4 class="font-bold text-gray-800 dark:text-white text-sm"&gt;批量导入客户&lt;/h4&gt;&lt;p class="text-xs text-gray-500 mt-0.5"&gt;上传 CSV 文件批量添加&lt;/p&gt;&lt;/div&gt;&lt;input type="file" onchange="handleFileImport(this)" class="absolute inset-0 opacity-0 cursor-pointer" accept=".csv"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div onclick="exportCustomers()" class="glass-panel p-5 rounded-2xl flex items-center gap-4 cursor-pointer hover:border-pink-200"&gt;&lt;div class="w-10 h-10 rounded-xl bg-pink-100 text-pink-600 flex items-center justify-center"&gt;&lt;i class="fa-solid fa-download"&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;h4 class="font-bold text-gray-800 dark:text-white text-sm"&gt;批量导出客户&lt;/h4&gt;&lt;p class="text-xs text-gray-500 mt-0.5"&gt;导出所有客户资料为 CSV&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-3"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h4 class="text-xs font-bold text-gray-400 uppercase ml-2"&gt;业务流水管理&lt;/h4&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div onclick="downloadTransactionTemplate()" class="glass-panel p-5 rounded-2xl flex items-center gap-4 cursor-pointer hover:border-blue-200"&gt;&lt;div class="w-10 h-10 rounded-xl bg-blue-100 text-blue-600 flex items-center justify-center"&gt;&lt;i class="fa-solid fa-file-invoice-dollar"&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;h4 class="font-bold text-gray-800 dark:text-white text-sm"&gt;下载业务导入模板&lt;/h4&gt;&lt;p class="text-xs text-gray-500 mt-0.5"&gt;含姓名、客户号、金额、类型等&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class="glass-panel p-5 rounded-2xl flex items-center gap-4 cursor-pointer hover:border-emerald-200 relative"&gt;&lt;div class="w-10 h-10 rounded-xl bg-emerald-100 text-emerald-600 flex items-center justify-center"&gt;&lt;i class="fa-solid fa-file-import"&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;h4 class="font-bold text-gray-800 dark:text-white text-sm"&gt;批量导入业务&lt;/h4&gt;&lt;p class="text-xs text-gray-500 mt-0.5"&gt;上传 CSV 自动匹配客户&lt;/p&gt;&lt;/div&gt;&lt;input type="file" onchange="handleTransactionImport(this)" class="absolute inset-0 opacity-0 cursor-pointer" accept=".csv"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div onclick="exportTransactionsBatch()" class="glass-panel p-5 rounded-2xl flex items-center gap-4 cursor-pointer hover:border-purple-200"&gt;&lt;div class="w-10 h-10 rounded-xl bg-purple-100 text-purple-600 flex items-center justify-center"&gt;&lt;i class="fa-solid fa-file-export"&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;h4 class="font-bold text-gray-800 dark:text-white text-sm"&gt;批量导出业务&lt;/h4&gt;&lt;p class="text-xs text-gray-500 mt-0.5"&gt;导出全量业务流水记录&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; `;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (type === 'guide') {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; content = `<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ${header('系统使用指南')}<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-3 pb-8"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;details class="group bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm"&gt;&lt;summary class="flex justify-between font-bold&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; text-sm text-gray-700 dark:text-gray-200 cursor-pointer"&gt;&lt;span&gt;1. 如何录入业务?&lt;/span&gt;&lt;i class="fa-solid fa-chevron-down transition-transform group-open:rotate-180"&gt;&lt;/i&gt;&lt;/summary&gt;&lt;p class="text-xs text-gray-500 dark:text-gray-400 mt-2 leading-relaxed"&gt;点击底部导航栏中间的&ldquo;+&rdquo;按钮，或在概览页点击&ldquo;业务流水&rdquo;卡片进入，选择&ldquo;新增&rdquo;。输入金额、选择类型并关联客户即可。&lt;/p&gt;&lt;/details&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;details class="group bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm"&gt;&lt;summary class="flex justify-between font-bold text-sm text-gray-700 dark:text-gray-200 cursor-pointer"&gt;&lt;span&gt;2.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 批量导入/导出客户?&lt;/span&gt;&lt;i class="fa-solid fa-chevron-down transition-transform group-open:rotate-180"&gt;&lt;/i&gt;&lt;/summary&gt;&lt;p class="text-xs text-gray-500 dark:text-gray-400 mt-2 leading-relaxed"&gt;进入&ldquo;个人中心&rdquo; -&gt; &ldquo;客户数据中心&rdquo;。&lt;br&gt;导入：先下载模板，按格式填充后上传CSV。&lt;br&gt;导出：直接点击&ldquo;批量导出&rdquo;获取文件。&lt;/p&gt;&lt;/details&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;details class="group bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm"&gt;&lt;summary class="flex justify-between font-bold text-sm text-gray-700 dark:text-gray-200 cursor-pointer"&gt;&lt;span&gt;3.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 数据备份与恢复?&lt;/span&gt;&lt;i class="fa-solid fa-chevron-down transition-transform group-open:rotate-180"&gt;&lt;/i&gt;&lt;/summary&gt;&lt;p class="text-xs text-gray-500 dark:text-gray-400 mt-2 leading-relaxed"&gt;进入&ldquo;个人中心&rdquo; -&gt; &ldquo;系统数据中心&rdquo;。点击备份可下载全量 JSON 数据；点击导入可恢复该文件。建议每周备份。&lt;/p&gt;&lt;/details&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;details class="group bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm"&gt;&lt;summary class="flex justify-between font-bold text-sm text-gray-700 dark:text-gray-200 cursor-pointer"&gt;&lt;span&gt;4.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 智能通知如何使用?&lt;/span&gt;&lt;i class="fa-solid fa-chevron-down transition-transform group-open:rotate-180"&gt;&lt;/i&gt;&lt;/summary&gt;&lt;p class="text-xs text-gray-500 dark:text-gray-400 mt-2 leading-relaxed"&gt;系统自动运行。右上角铃铛会提示：&lt;br&gt;- 客户生日前7天&lt;br&gt;- 定存到期前30天&lt;br&gt;- 高价值客户(&gt;20万)超30天未跟进&lt;/p&gt;&lt;/details&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;details class="group bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm"&gt;&lt;summary class="flex justify-between font-bold text-sm text-gray-700 dark:text-gray-200 cursor-pointer"&gt;&lt;span&gt;5.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 跟进中心使用说明&lt;/span&gt;&lt;i class="fa-solid fa-chevron-down transition-transform group-open:rotate-180"&gt;&lt;/i&gt;&lt;/summary&gt;&lt;p class="text-xs text-gray-500 dark:text-gray-400 mt-2 leading-relaxed"&gt;点击&ldquo;写跟进&rdquo;记录日常沟通。使用顶部筛选栏可按姓名/日期查找记录。点击&ldquo;导出&rdquo;可下载跟进报表。&lt;/p&gt;&lt;/details&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; `;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (type === 'version') {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; content = `<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ${header('关于版本')}<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="space-y-3"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="glass-panel p-5 rounded-2xl"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 class="font-bold text-gray-800 dark:text-white mb-3"&gt;V10.0 Enhanced 更新日志&lt;/h3&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ul class="text-xs text-gray-600 dark:text-gray-300 space-y-2 list-disc pl-4"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li&gt;&lt;b&gt;新增&lt;/b&gt;：客户数据中心新增业务流水批量导入/导出功能。&lt;/li&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li&gt;&lt;b&gt;新增&lt;/b&gt;：支持按客户号或姓名自动匹配导入业务数据。&lt;/li&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li&gt;&lt;b&gt;优化&lt;/b&gt;：客户搜索框升级为胶囊样式（Rounded-Full）。&lt;/li&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li&gt;&lt;b&gt;优化&lt;/b&gt;：跟进中心筛选框升级为胶囊样式（Rounded-Full）。&lt;/li&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li&gt;&lt;b&gt;修复&lt;/b&gt;：数据导入后自动刷新资产计算逻辑。&lt;/li&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li&gt;&lt;b&gt;重大升级&lt;/b&gt;：核心体验优化和版本号升级到 V10.0。&lt;/li&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/ul&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="glass-panel p-5 rounded-2xl"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;h3 class="font-bold text-gray-800 dark:text-white mb-3"&gt;✨ V10.0 核心特性&lt;/h3&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ul class="text-xs text-gray-600 dark:text-gray-300 space-y-3"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li class="flex items-start gap-2"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fa-solid fa-star text-yellow-500 mt-0.5"&gt;&lt;/i&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span&gt;&lt;b&gt;智能提醒引擎&lt;/b&gt;：客户生日、定存到期、高净值客户跟进预警，商机不遗漏&lt;/span&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/li&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li class="flex items-start gap-2"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fa-solid fa-rocket text-blue-500 mt-0.5"&gt;&lt;/i&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span&gt;&lt;b&gt;批量高效操作&lt;/b&gt;：客户/业务流水批量导入导出，告别重复录入，效率翻倍&lt;/span&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/li&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li class="flex items-start gap-2"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fa-solid fa-palette text-pink-500 mt-0.5"&gt;&lt;/i&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span&gt;&lt;b&gt;多主题定制&lt;/b&gt;：默认绿、少女粉、星辰蓝三色主题，黑夜模式护眼，办公更舒适&lt;/span&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/li&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li class="flex items-start gap-2"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fa-solid fa-shield-halved text-emerald-500 mt-0.5"&gt;&lt;/i&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span&gt;&lt;b&gt;隐私卫士模式&lt;/b&gt;：一键隐藏客户敏感信息，合规办公，安全无忧&lt;/span&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/li&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li class="flex items-start gap-2"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fa-solid fa-database text-purple-500 mt-0.5"&gt;&lt;/i&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span&gt;&lt;b&gt;全量数据备份&lt;/b&gt;：本地JSON备份+恢复，数据安全有保障，不怕丢失&lt;/span&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/li&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;li class="flex items-start gap-2"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fa-solid fa-hand-pointer text-orange-500 mt-0.5"&gt;&lt;/i&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span&gt;&lt;b&gt;丝滑交互体验&lt;/b&gt;：IOS级动画特效，页面切换、点击反馈流畅自然，操作更愉悦&lt;/span&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/li&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/ul&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="text-center text-[10px] text-gray-400&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mt-4"&gt;著作权人：黄修宇&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; `;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sub.innerHTML = content;<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; function closeSubMenu() {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.getElementById('sub-menu-container').classList.add('hidden');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.getElementById('mine-root').classList.remove('hidden');<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; let fuFilterDate = '';<br />&nbsp; &nbsp; &nbsp; &nbsp; let fuFilterName = '';<br />&nbsp; &nbsp; &nbsp; &nbsp; function renderFollowupsPage(container) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Update: Inputs are now rounded-full (胶囊框)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; container.innerHTML = `<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="max-w-4xl mx-auto h-full flex flex-col"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex flex-col md:flex-row gap-3 mb-6 sticky top-0 z-10 py-2 -mx-4 px-4 backdrop-blur-xl"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="flex gap-3 flex-1"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;input type="date" value="${fuFilterDate}" onchange="updateFuFilter('date', this.value)" class="glass-panel px-4 py-3 rounded-full text-sm text-gray-600 dark:text-gray-300 outline-none w-full md:w-auto bg-white/10 dark:bg-gray-800/10" placeholder="按日期筛选"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;input type="text" value="${fuFilterName}" oninput="updateFuFilter('name', this.value)" class="glass-panel px-4 py-3 rounded-full text-sm&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; text-gray-600 dark:text-gray-300 outline-none w-full bg-white/10 dark:bg-gray-800/10" placeholder="输入客户姓名筛选..."&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="relative"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="document.getElementById('fu-export-menu').classList.toggle('hidden')" class="bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700 px-4 py-2.5 rounded-full text-sm font-bold shadow-sm hover:bg-gray-50&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dark:hover:bg-gray-700 transition-all flex items-center gap-2 h-full"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fa-solid fa-file-export"&gt;&lt;/i&gt; 导出<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="fu-export-menu" class="hidden absolute&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; right-0 top-12 w-40 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden z-20 animate-slide-up"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="exportFollowups('today')" class="w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 text-xs font-bold text-gray-700 dark:text-gray-300 border-b border-gray-50 dark:border-gray-700"&gt;导出今日&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="exportFollowups('week')" class="w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 text-xs font-bold&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; text-gray-700 dark:text-gray-300 border-b border-gray-50 dark:border-gray-700"&gt;导出近一周&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="exportFollowups('month')" class="w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 text-xs font-bold text-gray-700 dark:text-gray-300 border-b border-gray-50 dark:border-gray-700"&gt;导出近一月&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="exportFollowups('all')" class="w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 text-xs font-bold text-gray-700 dark:text-gray-300"&gt;导出全部&lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button onclick="showFollowupModal()" class="bg-primary text-white px-5 py-2.5 rounded-full text-sm font-bold shadow-lg hover:bg-primaryDark transition-all flex items-center justify-center gap-2 shrink-0"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fa-solid fa-plus"&gt;&lt;/i&gt; 写跟进<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div id="followup-list-container"&gt;&lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; `;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; renderFollowupsList();<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; // --- Global Tools Definition ---<br />&nbsp; &nbsp; &nbsp; &nbsp; function exportFollowups(range){const today=new Date();let filtered=db.data.followups;if(range==='today'){const dateStr=today.toISOString().split('T')[0];filtered=filtered.filter(f=&gt;f.date.startsWith(dateStr));}else if(range==='week'){const limit=new Date();limit.setDate(today.getDate()-7);filtered=filtered.filter(f=&gt;new Date(f.date)&gt;=limit);}else if(range==='month'){const limit=new Date();limit.setDate(today.getDate()-30);filtered=filtered.filter(f=&gt;new Date(f.date)&gt;=limit);}let csvContent="\ufeff姓名,时间,跟进内容\n";filtered.forEach(f=&gt;{const cust=db.data.customers.find(c=&gt;c.id===f.custId)||{name:'未知客户'};const content=f.content.replace(/"/g,'""');csvContent+=`${cust.name},${f.date},"${content}"\n`;});const blob=new Blob([csvContent],{type:'text/csv;charset=utf-8;'});const url=URL.createObjectURL(blob);const link=document.createElement("a");link.href=url;link.download=`跟进记录_${range}_${new Date().toISOString().slice(0,10)}.csv`;document.body.appendChild(link);link.click();document.body.removeChild(link);document.getElementById('fu-export-menu').classList.add('hidden');}<br />&nbsp; &nbsp; &nbsp; &nbsp; function renderFollowupsList(){const listContainer=document.getElementById('followup-list-container');if(!listContainer)return;const filteredFus=db.data.followups.filter(f=&gt;{const cust=db.data.customers.find(c=&gt;c.id===f.custId)||{name:''};const matchDate=fuFilterDate?f.date.startsWith(fuFilterDate):true;const matchName=fuFilterName?cust.name.includes(fuFilterName):true;return matchDate&amp;&amp;matchName;}).sort((a,b)=&gt;new Date(b.date)-new Date(a.date));if(filteredFus.length===0){listContainer.innerHTML=`&lt;div class="text-center py-10 opacity-50 flex flex-col items-center"&gt;&lt;i class="fa-solid fa-filter-circle-xmark text-3xl mb-2"&gt;&lt;/i&gt;暂无匹配记录&lt;/div&gt;`;return;}listContainer.innerHTML=`&lt;div class="relative pl-4 md:pl-8 space-y-8 pb-12"&gt;&lt;div class="absolute left-[23px] md:left-[39px] top-4 bottom-0 w-[2px] bg-gradient-to-b from-gray-200 to-transparent"&gt;&lt;/div&gt;${filteredFus.map((f,i)=&gt;{const cust=db.data.customers.find(c=&gt;c.id===f.custId)||{name:'未知客户'};let typeIcon='fa-phone',typeColor='bg-blue-100 text-blue-600';if(f.type.includes('微信')){typeIcon='fa-comments';typeColor='bg-green-100 text-green-600';}if(f.type.includes('上门')||f.type.includes('网点')){typeIcon='fa-building';typeColor='bg-orange-100 text-orange-600';}return`&lt;div class="relative flex gap-4 md:gap-6 animate-slide-up stagger-${i%5+1}"&gt;&lt;div class="z-10 w-4 h-4 rounded-full bg-white&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dark:bg-gray-800 border-4 border-gray-200 dark:border-gray-700 mt-5 shadow-sm shrink-0"&gt;&lt;/div&gt;&lt;div class="flex-1 glass-panel p-5 rounded-[1.5rem] hover:border-primary/30 transition-all group"&gt;&lt;div class="flex justify-between items-start mb-3"&gt;&lt;div class="flex items-center gap-3"&gt;&lt;div class="w-10 h-10 rounded-full ${typeColor} flex items-center justify-center text-sm shadow-inner shrink-0"&gt;&lt;i class="fa-solid ${typeIcon}"&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;h4 class="font-bold text-gray-800 dark:text-white text-sm md:text-base"&gt;${PrivacyUtils.maskName(cust.name)}&lt;/h4&gt;&lt;p class="text-xs text-gray-400 font-mono"&gt;${f.date}&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;span class="text-[10px] bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 px-2 py-1 rounded-lg text-gray-500 dark:text-gray-300 font-bold shrink-0"&gt;${f.type}&lt;/span&gt;&lt;/div&gt;&lt;div class="pl-[52px]"&gt;&lt;p class="text-sm text-gray-600 dark:text-gray-300 leading-relaxed bg-white/50 dark:bg-gray-900/50 p-3 rounded-xl border border-white/60 dark:border-gray-700/50"&gt;${f.content}&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;`;}).join('')}&lt;/div&gt;`;}<br />&nbsp; &nbsp; &nbsp; &nbsp; function updateFuFilter(t,v){if(t==='date')fuFilterDate=v;if(t==='name')fuFilterName=v;renderFollowupsList();}<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; function renderCustomers(c){<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Update: Search box is now rounded-full (胶囊框)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c.innerHTML=`&lt;div class="h-full flex flex-col max-w-5xl mx-auto w-full"&gt;&lt;div class="sticky top-0 z-20 py-2 -mx-4 px-4 backdrop-blur-xl"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="glass-panel p-3 pl-4 md:pl-5 rounded-full flex items-center gap-2 shadow-sm focus-within:ring-2 ring-emerald-100 dark:ring-emerald-900 transition-all bg-white/10 dark:bg-gray-800/10"&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class="fa-solid fa-search text-gray-400"&gt;&lt;/i&gt;&lt;input type="text" oninput="filterCust(this.value)" placeholder="姓名 / 客户号" class="flex-1 min-w-0 py-3 outline-none text-sm bg-transparent dark:text-white"&gt;&lt;button onclick="openAddCustomerModal()" class="bg-gray-900 dark:bg-black text-white w-10 h-10 shrink-0 rounded-full flex items-center justify-center hover:bg-black dark:hover:bg-gray-900 transition-all shadow-lg"&gt;&lt;i class="fa-solid fa-user-plus"&gt;&lt;/i&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;div id="customer-list" class="space-y-3 pb-20 px-1"&gt;&lt;/div&gt;&lt;/div&gt;`;filterCust('');<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; function filterCust(q){const list=document.getElementById('customer-list');if(!list)return;const res=db.data.customers.filter(c=&gt;c.name.includes(q)||c.phone.includes(q)||c.custNo.includes(q));list.innerHTML=res.map((c,i)=&gt;{const a=c.assets||0;let l='text-gray-300';if(a&gt;=500000)l='text-purple-500 fa-gem';else if(a&gt;=200000)l='text-blue-500 fa-certificate';else if(a&gt;=50000)l='text-amber-500 fa-crown';const avatarBg=c.gender==='男'?'bg-blue-50 text-blue-500':'bg-red-50 text-red-500';return`&lt;div onclick="showDetail('${c.id}')" class="glass-panel p-4 rounded-2xl flex items-center justify-between cursor-pointer animate-slide-up stagger-${i%5+1}"&gt;&lt;div class="flex items-center gap-4"&gt;&lt;div class="w-12 h-12 rounded-full ${avatarBg} flex items-center justify-center font-bold text-lg shrink-0"&gt;${c.name[0]}&lt;/div&gt;&lt;div class="min-w-0"&gt;&lt;h4 class="font-bold text-gray-800 dark:text-white text-sm truncate"&gt;${PrivacyUtils.maskName(c.name)} &lt;i class="fa-solid ${l} text-xs"&gt;&lt;/i&gt;&lt;/h4&gt;&lt;p class="text-xs text-gray-400 mt-0.5 font-mono truncate"&gt;${PrivacyUtils.maskCustNo(c.custNo)||'-'}&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="text-right shrink-0"&gt;&lt;p class="text-sm font-bold text-gray-800 dark:text-white font-mono"&gt;${PrivacyUtils.maskMoney(a)}&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;`;}).join('');if(res.length===0)list.innerHTML=`&lt;div class="text-center py-20 text-gray-400 text-sm"&gt;无匹配结果&lt;/div&gt;`;}<br />&nbsp; &nbsp; &nbsp; &nbsp; let txFilterType='all';let txStartDate='';let txEndDate='';<br />&nbsp; &nbsp; &nbsp; &nbsp; function renderTransactions(c){let txs=[...db.data.transactions];const today=new Date();if(txFilterType==='month'){const limit=new Date();limit.setDate(today.getDate()-30);txs=txs.filter(t=&gt;new Date(t.date)&gt;=limit);}else if(txFilterType==='week'){const limit=new Date();limit.setDate(today.getDate()-7);txs=txs.filter(t=&gt;new Date(t.date)&gt;=limit);}else if(txFilterType==='range'){if(txStartDate)txs=txs.filter(t=&gt;t.date&gt;=txStartDate);if(txEndDate)txs=txs.filter(t=&gt;t.date&lt;=txEndDate);}txs=txs.sort((a,b)=&gt;new Date(b.date)-new Date(a.date));c.innerHTML=`&lt;div class="max-w-5xl mx-auto space-y-4"&gt;&lt;div class="glass-panel p-3 rounded-2xl flex flex-col md:flex-row justify-between items-center sticky top-0 z-10 mb-4 bg-white/80 dark:bg-gray-800/80 gap-3"&gt;&lt;div class="flex items-center gap-2 overflow-x-auto no-scrollbar w-full md:w-auto"&gt;&lt;button onclick="setTxFilter('all')" class="px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${txFilterType==='all'?'bg-gray-900 text-white dark:bg-white dark:text-gray-900':'bg-gray-100 text-gray-500 dark:bg-gray-700 dark:text-gray-300'}"&gt;全部&lt;/button&gt;&lt;button onclick="setTxFilter('week')" class="px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${txFilterType==='week'?'bg-gray-900 text-white dark:bg-white dark:text-gray-900':'bg-gray-100 text-gray-500 dark:bg-gray-700 dark:text-gray-300'}"&gt;近一周&lt;/button&gt;&lt;button onclick="setTxFilter('month')" class="px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${txFilterType==='month'?'bg-gray-900 text-white dark:bg-white dark:text-gray-900':'bg-gray-100 text-gray-500 dark:bg-gray-700 dark:text-gray-300'}"&gt;近一月&lt;/button&gt;&lt;/div&gt;&lt;div class="flex items-center gap-2 w-full md:w-auto bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg px-2 py-1.5 focus-within:ring-1 focus-within:ring-primary ${txFilterType==='range'?'bg-white border-primary':''}"&gt;&lt;input type="date"&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value="${txStartDate}" onchange="setTxRange('start', this.value)" class="bg-transparent text-xs outline-none text-gray-600 dark:text-gray-300 w-24"&gt;&lt;span class="text-gray-400"&gt;-&lt;/span&gt;&lt;input type="date" value="${txEndDate}" onchange="setTxRange('end', this.value)" class="bg-transparent text-xs outline-none text-gray-600 dark:text-gray-300 w-24"&gt;&lt;/div&gt;&lt;/div&gt;${txs.length===0?`&lt;div class="text-center py-10 opacity-50"&gt;&lt;p&gt;暂无流水记录&lt;/p&gt;&lt;/div&gt;`:txs.map((t,i)=&gt;{const u=db.data.customers.find(x=&gt;x.id===t.custId);return`&lt;div class="glass-panel p-5 rounded-2xl flex justify-between items-center animate-slide-up stagger-${i%5+1}"&gt;&lt;div&gt;&lt;h4 class="font-bold text-gray-800 dark:text-white text-sm"&gt;${t.type}&lt;/h4&gt;&lt;div class="flex items-center gap-2 mt-1"&gt;&lt;span class="text-xs text-gray-400"&gt;${t.date}&lt;/span&gt;&lt;span class="text-xs text-primary bg-primary/10 px-1.5 rounded"&gt;${PrivacyUtils.maskName(u?u.name:'Unknown')}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;span class="font-bold text-gray-800 dark:text-white font-mono"&gt;+${PrivacyUtils.maskMoney(t.amount)}&lt;/span&gt;&lt;/div&gt;`}).join('')}&lt;/div&gt;`;}<br />&nbsp; &nbsp; &nbsp; &nbsp; function setTxFilter(t){txFilterType=t;txStartDate='';txEndDate='';renderTransactions(document.getElementById('content-area'));}<br />&nbsp; &nbsp; &nbsp; &nbsp; function setTxRange(t,v){txFilterType='range';if(t==='start')txStartDate=v;if(t==='end')txEndDate=v;renderTransactions(document.getElementById('content-area'));}<br />&nbsp; &nbsp; &nbsp; &nbsp; function closeAllModals(){document.querySelectorAll('[id$="-modal"],#modal-overlay').forEach(e=&gt;e.classList.add('hidden'));}<br />&nbsp; &nbsp; &nbsp; &nbsp; function closeConfirmModal(){document.getElementById('confirm-modal').classList.add('hidden');}<br />&nbsp; &nbsp; &nbsp; &nbsp; let selectedBizCustomer=null;<br />&nbsp; &nbsp; &nbsp; &nbsp; let selectedFuCustomer=null; let currentDetailCustomerId=null;<br />&nbsp; &nbsp; &nbsp; &nbsp; function showBusinessModal(){document.getElementById('modal-overlay').classList.remove('hidden');document.getElementById('business-modal').classList.remove('hidden');selectedBizCustomer=null;document.getElementById('biz-selected-customer').classList.add('hidden');}<br />&nbsp; &nbsp; &nbsp; &nbsp; function searchCustomerForBiz(){const q=document.getElementById('biz-search-input').value;const r=db.data.customers.filter(c=&gt;c.name.includes(q)||c.phone.includes(q));document.getElementById('biz-search-results').innerHTML=r.map(c=&gt;`&lt;div onclick="selBiz('${c.id}','${c.name}')" class="p-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm border-b border-gray-100 dark:border-gray-700 dark:text-gray-300"&gt;${c.name} - ${c.phone}&lt;/div&gt;`).join('');document.getElementById('biz-search-results').classList.remove('hidden');}<br />&nbsp; &nbsp; &nbsp; &nbsp; function selBiz(id,n){selectedBizCustomer=id;document.getElementById('biz-customer-name').innerText=n;document.getElementById('biz-selected-customer').classList.remove('hidden');document.getElementById('biz-search-results').classList.add('hidden');}<br />&nbsp; &nbsp; &nbsp; &nbsp; function saveTransaction(){const amt=document.getElementById('biz-amount').value;if(!amt)return alert('请输入金额');if(!selectedBizCustomer)return alert('请选择客户');db.addTransaction({amount:parseFloat(amt)*10000,type:document.getElementById('biz-type').value,date:document.getElementById('biz-date').value,remark:document.getElementById('biz-remark').value,custId:selectedBizCustomer});alert('成功');closeAllModals();router.navigate('overview');}<br />&nbsp; &nbsp; &nbsp; &nbsp; function showFollowupModal(){document.getElementById('modal-overlay').classList.remove('hidden');document.getElementById('followup-modal').classList.remove('hidden');selectedFuCustomer=null;document.getElementById('fu-selected-customer').classList.add('hidden');document.getElementById('fu-search-input').value='';document.getElementById('fu-content').value='';}<br />&nbsp; &nbsp; &nbsp; &nbsp; function searchCustomerForFu(){const q=document.getElementById('fu-search-input').value;const r=db.data.customers.filter(c=&gt;c.name.includes(q)||c.phone.includes(q));document.getElementById('fu-search-results').innerHTML=r.map(c=&gt;`&lt;div onclick="selFu('${c.id}','${c.name}')" class="p-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm border-b border-gray-100 dark:border-gray-700 last:border-0 dark:text-gray-300"&gt;${c.name} &lt;span class="text-xs text-gray-400"&gt;(${c.phone})&lt;/span&gt;&lt;/div&gt;`).join('');document.getElementById('fu-search-results').classList.remove('hidden');}<br />&nbsp; &nbsp; &nbsp; &nbsp; function selFu(id,n){selectedFuCustomer=id;document.getElementById('fu-customer-name').innerText=n;document.getElementById('fu-selected-customer').classList.remove('hidden');document.getElementById('fu-search-results').classList.add('hidden');}<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; function selectFuType(el,t){document.getElementById('fu-type').value=t;document.querySelectorAll('.fu-type-btn').forEach(d=&gt;{d.classList.remove('bg-primary','text-white','shadow-md');d.classList.add('bg-gray-100','dark:bg-gray-700','text-gray-500','dark:text-gray-300');});el.classList.remove('bg-gray-100','dark:bg-gray-700','text-gray-500','dark:text-gray-300');el.classList.add('bg-primary','text-white','shadow-md');}<br />&nbsp; &nbsp; &nbsp; &nbsp; function saveFollowup(){const custId=selectedFuCustomer;if(!custId)return alert('请先搜索并关联一位客户');db.addFollowup({custId:custId,type:document.getElementById('fu-type').value,content:document.getElementById('fu-content').value});alert('跟进已保存');closeAllModals();router.navigate('followups');}<br />&nbsp; &nbsp; &nbsp; &nbsp; function openAddCustomerModal(){document.getElementById('modal-overlay').classList.remove('hidden');document.getElementById('add-customer-modal').classList.remove('hidden');document.getElementById('cust-modal-title').innerText='录入客户';document.getElementById('cust-edit-id').value='';['cust-name','cust-phone','cust-idcard','cust-no'].forEach(id=&gt;document.getElementById(id).value='');}<br />&nbsp; &nbsp; &nbsp; &nbsp; function editCurrentCustomer(){if(!currentDetailCustomerId)return;const c=db.data.customers.find(x=&gt;x.id===currentDetailCustomerId);if(!c)return;closeAllModals();openAddCustomerModal();document.getElementById('cust-modal-title').innerText='修改客户信息';document.getElementById('cust-edit-id').value=c.id;document.getElementById('cust-name').value=c.name;document.getElementById('cust-gender').value=c.gender||'男';document.getElementById('cust-phone').value=c.phone;document.getElementById('cust-idcard').value=c.idcard||'';document.getElementById('cust-no').value=c.custNo||'';document.getElementById('cust-source').value=c.source||'发单客户';}<br />&nbsp; &nbsp; &nbsp; &nbsp; function saveNewCustomer(){const id=document.getElementById('cust-edit-id').value;const data={name:document.getElementById('cust-name').value,phone:document.getElementById('cust-phone').value,idcard:document.getElementById('cust-idcard').value,custNo:document.getElementById('cust-no').value,gender:document.getElementById('cust-gender').value,source:document.getElementById('cust-source').value};if(!data.name)return alert('姓名必填');if(id){db.updateCustomer({id,...data});alert('修改成功');}else{db.addCustomer(data);alert('录入成功');}closeAllModals();router.navigate('customers');}<br />&nbsp; &nbsp; &nbsp; &nbsp; function showDeleteConfirm(){if(!currentDetailCustomerId)return;document.getElementById('confirm-modal').classList.remove('hidden');}<br />&nbsp; &nbsp; &nbsp; &nbsp; function executeDelete(){if(!currentDetailCustomerId)return;db.deleteCustomer(currentDetailCustomerId);closeAllModals();closeConfirmModal();router.navigate('customers');}<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; function showDetail(id){currentDetailCustomerId=id;const c=db.data.customers.find(x=&gt;x.id===id);if(!c)return;document.getElementById('customer-detail-modal').classList.remove('hidden');document.getElementById('detail-name').innerText=c.name;const avatarDiv=document.getElementById('detail-avatar');avatarDiv.className=`w-16 h-16 rounded-2xl flex items-center justify-center text-2xl font-bold shadow-inner border border-white dark:border-gray-700 ${c.gender==='男'?'bg-blue-50 text-blue-500':'bg-red-50 text-red-500'}`;avatarDiv.innerText=c.name[0];document.getElementById('detail-id').innerText=PrivacyUtils.maskCustNo(c.custNo)||'无编号';document.getElementById('detail-assets').innerHTML=PrivacyUtils.maskMoney(c.assets);document.getElementById('detail-basic-info').innerHTML=`&lt;div&gt;&lt;span class="text-gray-400 block text-xs mb-1"&gt;手机号码&lt;/span&gt;${PrivacyUtils.maskPhone(c.phone)}&lt;/div&gt;&lt;div&gt;&lt;span class="text-gray-400&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; block text-xs mb-1"&gt;身份证号&lt;/span&gt;${PrivacyUtils.maskID(c.idcard)||'-'}&lt;/div&gt;&lt;div&gt;&lt;span class="text-gray-400 block text-xs mb-1"&gt;来源渠道&lt;/span&gt;${c.source}&lt;/div&gt;&lt;div&gt;&lt;span class="text-gray-400 block text-xs mb-1"&gt;性别&lt;/span&gt;${c.gender}&lt;/div&gt;`;document.getElementById('detail-tx-list').innerHTML=db.data.transactions.filter(t=&gt;t.custId===id).map(t=&gt;`&lt;div class="bg-gray-50 dark:bg-gray-700/50 p-3 rounded-xl text-sm flex justify-between dark:text-gray-300"&gt;&lt;span&gt;${t.type}&lt;/span&gt;&lt;span class="font-bold"&gt;+${PrivacyUtils.maskMoney(t.amount)}&lt;/span&gt;&lt;/div&gt;`).join('');document.getElementById('detail-fu-list').innerHTML=db.data.followups.filter(f=&gt;f.custId===id).map(f=&gt;`&lt;div class="bg-gray-50 dark:bg-gray-700/50 p-3 rounded-xl text-sm dark:text-gray-300"&gt;&lt;span class="font-bold text-gray-700 dark:text-white"&gt;${f.type}&lt;/span&gt; &lt;span class="text-xs text-gray-400"&gt;${f.date}&lt;/span&gt;&lt;p class="text-gray-600 dark:text-gray-400 mt-1"&gt;${f.content}&lt;/p&gt;&lt;/div&gt;`).join('');}<br />&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; // --- 批量导入导出逻辑 ---</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; // 1. 客户导入<br />&nbsp; &nbsp; &nbsp; &nbsp; function handleFileImport(input) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const file = input.files[0];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!file) return;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const reader = new FileReader();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.onload = function(e) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const text = e.target.result;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const rows = text.split(/\r?\n/);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let success = 0; let skip = 0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for (let i = 1; i &lt; rows.length; i++) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const row = rows[i].trim();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!row) continue;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const cols = row.split(','); if (cols.length &lt; 2) continue;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const name = cols[0]?.trim(); const phone = cols[1]?.trim();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!name) { skip++; continue; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const exists = db.data.customers.some(c =&gt; c.phone === phone);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (exists) { skip++; continue; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let gender = '男';<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const idcard = cols[2]?.trim() || '';<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (idcard.length === 18) { const genderCode = parseInt(idcard.charAt(16));<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (genderCode % 2 === 0) gender = '女'; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db.addCustomer({ name: name, phone: phone, idcard: idcard, custNo: cols[3]?.trim()||'', gender: gender, source: '发单客户' });<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; success++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(`导入完成！成功：${success} 条，跳过：${skip} 条`);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; input.value = '';<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.readAsText(file);<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; // 2. 业务导入 (New)<br />&nbsp; &nbsp; &nbsp; &nbsp; function handleTransactionImport(input) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const file = input.files[0];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!file) return;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const reader = new FileReader();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.onload = function(e) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const text = e.target.result;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const rows = text.split(/\r?\n/);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let success = 0; let fail = 0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Header: 姓名,客户号,业务日期,业务类型,业务金额<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for (let i = 1; i &lt; rows.length; i++) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const row = rows[i].trim();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!row) continue;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const cols = row.split(',');&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (cols.length &lt; 5) { fail++; continue;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const name = cols[0].trim();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const custNo = cols[1].trim();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const date = cols[2].trim();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const type = cols[3].trim();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const amountStr = cols[4].trim();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Match Customer: Prefer CustNo, then Name<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let customer = null;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(custNo) customer = db.data.customers.find(c =&gt; c.custNo === custNo);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!customer &amp;&amp; name) customer = db.data.customers.find(c =&gt; c.name === name);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(customer) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const amount = parseFloat(amountStr);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!isNaN(amount)) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;db.addTransaction({<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;amount: amount,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;type: type,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;date: date,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;remark: '批量导入',<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;custId:&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; customer.id<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; success++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else { fail++; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fail++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // No customer matched<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(`业务导入完成！成功关联：${success} 条，失败/未匹配：${fail} 条`);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; input.value = '';<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.readAsText(file);<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; function downloadTemplate() {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const header = "姓名,联系电话,身份证号,客户号\n";<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const example = "张三,13800138000,420102199001011234,C10001\n李四,13900139000,420102199505055678,C10002";<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const blob = new Blob(["\ufeff" + header + example], { type: 'text/csv;charset=utf-8;' });<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const url = URL.createObjectURL(blob);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const link = document.createElement("a");<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; link.href = url;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; link.download = "客户导入模板.csv";<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.body.appendChild(link);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; link.click();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.body.removeChild(link);<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; function downloadTransactionTemplate() {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const header = "客户姓名,客户号,业务日期(YYYY-MM-DD),业务类型,业务金额(元)\n";<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const example = "张三,C10001,2025-10-01,一年定期,50000\n李四,C10002,2025-10-05,自营理财,100000";<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const blob = new Blob(["\ufeff" + header + example], { type: 'text/csv;charset=utf-8;' });<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const url = URL.createObjectURL(blob);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const link = document.createElement("a");<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; link.href = url;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; link.download = "业务流水导入模板.csv";<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.body.appendChild(link);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; link.click();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.body.removeChild(link);<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; function exportCustomers() {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const csvContent = "\ufeff姓名,性别,电话,身份证号,客户号,资产(元),来源\n" +&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db.data.customers.map(c =&gt; `${c.name},${c.gender},${c.phone},${c.idcard||''},${c.custNo||''},${c.assets},${c.source}`).join('\n');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const url = URL.createObjectURL(blob);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const link = document.createElement("a");<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; link.href = url;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; link.download = `客户资料导出_${new Date().toISOString().slice(0,10)}.csv`;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.body.appendChild(link);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; link.click();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.body.removeChild(link);<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; function exportTransactionsBatch() {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const csvContent = "\ufeff业务ID,客户姓名,客户号,业务类型,金额(元),日期,备注\n" +&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db.data.transactions.map(t =&gt; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const c = db.data.customers.find(x =&gt; x.id === t.custId) || {name:'未知',custNo:''};<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return `${t.id},${c.name},${c.custNo||''},${t.type},${t.amount},${t.date},${t.remark||''}`;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }).join('\n');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const url = URL.createObjectURL(blob);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const link = document.createElement("a");<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; link.href = url;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; link.download = `业务流水导出_${new Date().toISOString().slice(0,10)}.csv`;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.body.appendChild(link);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; link.click();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.body.removeChild(link);<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; function exportData() {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const dataStr = JSON.stringify(db.data);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const blob = new Blob([dataStr], { type: "application/json" });<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const url = URL.createObjectURL(blob);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const linkElement = document.createElement('a');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; linkElement.href = url;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; linkElement.download = `HBC_Backup_${new Date().toISOString().slice(0,10)}.json`;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.body.appendChild(linkElement);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; linkElement.click();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; document.body.removeChild(linkElement);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; URL.revokeObjectURL(url);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } catch (e) { console.error(e); alert("备份失败");<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; function importData(input) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const file = input.files[0];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const reader = new FileReader();<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.onload = function(e) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; try {&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db.data = JSON.parse(e.target.result);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db.save();&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert('数据恢复成功');&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(db.data.appState.theme) applyTheme(db.data.appState.theme);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(db.data.appState.darkMode) applyDarkMode(true);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(db.data.appState.privacyMode) togglePrivacyMode(true, false);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; renderMine(document.getElementById('content-area'));&nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } catch(err) { alert('文件格式错误');<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reader.readAsText(file);<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; document.addEventListener('DOMContentLoaded', ()=&gt;{ db.init(); if(db.data.currentUser){document.getElementById('login-page').style.display='none';document.getElementById('app-container').classList.remove('hidden');router.navigate('overview');} document.getElementById('auth-form').addEventListener('submit',(e)=&gt;{ e.preventDefault(); const id=document.getElementById('auth-id').value,pwd=document.getElementById('auth-pwd').value,name=document.getElementById('auth-name').value; if(authMode==='register'){if(db.registerUser(id,name,pwd)){alert('注册成功');switchAuthMode('login');}else alert('ID已存在');} else{const u=db.loginUser(id,pwd);if(u){db.data.currentUser=u;db.save();document.getElementById('login-page').style.display='none';document.getElementById('app-container').classList.remove('hidden');router.navigate('overview');}else alert('Fail');} }); });<br />&nbsp; &nbsp; &lt;/script&gt;<br />&lt;/body&gt;<br />&lt;/html&gt;</p>

<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js" type="text/javascript"></script>
<script type="text/javascript">hljs.highlightAll();</script>
</body>
</html>